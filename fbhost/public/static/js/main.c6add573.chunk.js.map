{"version":3,"sources":["../node_modules/@ionic/core/dist/esm-es5 lazy /^/.//.*/.entry/.js$/ include: //.entry/.js$/ exclude: //.system/.entry/.js$/ groupOptions: {} namespace object","../node_modules/ionicons/dist/esm-es5 lazy /^/.//.*/.entry/.js$/ include: //.entry/.js$/ exclude: //.system/.entry/.js$/ groupOptions: {} namespace object","components/Menu.tsx","components/ExploreContainer.tsx","pages/Page.tsx","components/MainTabs.tsx","reducers/Address.ts","reducers/Cart.ts","reducers/CartAction.ts","components/ItemList.tsx","components/Payment.tsx","components/ShopHeader.tsx","components/ShopConditionAndOperatingHours.tsx","components/Address.tsx","pages/Checkout.tsx","components/MainHeader.tsx","pages/Dashboard.tsx","components/CartTotal.tsx","containers/Cart.tsx","services/FirebaseStorage.tsx","containers/CategoryItem.tsx","components/OrderDayShopHeader.tsx","containers/ShopMain.tsx","pages/OrderComplete.tsx","services/CartService.tsx","pages/Login.tsx","services/Stripe.tsx","containers/ShopItem.tsx","components/GoBack.tsx","components/MarketHeader.tsx","containers/MarketItems.tsx","containers/ShopSelectionList.tsx","pages/ShopSelection.tsx","reducers/ShopAction.ts","containers/Market.tsx","pages/ApplePay.tsx","App.tsx","serviceWorker.ts","services/FirebaseIniti.ts","index.tsx"],"names":["map","webpackAsyncContext","req","__webpack_require__","o","Promise","resolve","then","e","Error","code","ids","id","keys","Object","module","exports","appPages","title","url","iosIcon","rocketOutline","mdIcon","labels","Menu","location","useLocation","firebase","useFirebase","history","useHistory","useState","userPhoto","setUserPhoto","auth","useSelector","state","console","log","useEffect","isLoaded","isEmpty","clear","photoURL","contentId","type","side","lines","displayName","src","email","appPage","index","key","autoHide","className","pathname","routerLink","routerDirection","detail","slot","icon","label","bookmarkOutline","onClick","a","menuController","toggle","logout","push","ExploreContainer","name","target","rel","href","Page","useParams","hifreshdata","values","upload_categories","i","forEach","img_url","load_order","obj","useFirestoreConnect","collection","markets","firestore","data","ordered","Markets","length","tmarket","getFirebase","doc","add","docRef","new_category_id","item","产品","unit_price","售出单价","unit","规格","store_name","category_id","category_name","get","snapshot","update","result","collapse","size","cfaSignIn","subscribe","user","MainTabs","tab","happy","cartSharp","heartCircle","informationCircle","INITIAL_STATE","address1","address2","suburb","postcode","phone","addressReducer","action","payload","cartItemList","cart","total","cartReducer","x","parseFloat","toString","filter","newlist","shopReducer","shop","combineReducers","firebaseReducer","address","addCartAction","newItem","ItemList","dispatch","useDispatch","cartListWithQty","cartListArray","cartlistitemqty","cartItem","count","style","textAlign","cartWithQty","fill","color","closeOutline","flexDirection","justifyContent","paddingRight","width","Payment","payment","onChange","backgroundColor","paddingTop","paddingBottom","paddingLeft","value","onIonChange","chevronForwardOutline","ShopHeader","loadedShop","free_delivery_conditions","ShopConditionAndOperatingHours","cut_off_terms","AddressForm","onAddressChange","position","placeholder","required","Checkout","db","addressObj","setAddress","aggreement","setAggreement","paymentType","setPaymentType","setInvoiceId","setInvoice","showLoading","setShowLoading","cartState","setCartState","opening_hour","store_address","support_postcodes","service_offering","shopState","setShop","mapStateToProps","CartItemList","connect","ShopHeaderWithShop","EnhancedCondition","writeUserData","my_auth","json_auth","JSON","parse","stringify","providerId","providerData","display_name","payment_detail","contact_mobile","photo_url","uid","invoice","user_id","market_id","market_name","total_amount","platform_charges","cutoff_terms","delivery_date","order_date","status","payment_status","cart_total_cost_inc_GST","cart_items","batch_id","payment_type","set","response","error","res","catch","err","handleComplete","alert","closehandler","goBack","class","checked","isOpen","onDidDismiss","message","duration","MainHeader","Dashboard","setPostCode","elements","document","querySelectorAll","fullscreen","autofocus","inputMode","CartTotal","Cart","modal","EnhancedCartTotal","expand","FirestoreIonImg","downloadUrl","setDownloadUrl","storage","startsWith","imgref","refFromURL","getDownloadURL","CategoryItem","category","OrderDayShopHeader","ellipsisHorizontalCircleOutline","ShopMain","showModal","setShowModal","Categories","CartCounter","categoryName","market","imageUrl","basket","hidden","invoice_id","ConvertCartWithQty","cartItems","storeAs","invoiceStore","Invoice","element","ele","qty","existedItem","text-center","Login","getPlatforms","isPlatform","login","provider","pipe","mapUserToUserInfo","onAuthStateChanged","auth1","auth2","phoneNumber","logoFacebook","logoGoogle","shape","StripeComponent","Stripe","setPublishableKey","createCardToken","number","expMonth","expYear","cvc","ShopItem","heartOutline","favorites","setFavorites","padding","float","addCart","heart","withRouter","chevronBackOutline","MarketHeader","MarketItems","subcollections","dataStore","Market","ShopSelectionList","shops","handleShopClick","alt","ShopSelection","marketList","includes","setCurrentShop","profile","stateStore","ApplePay","stripe","useStripe","useElements","pr","paymentRequest","country","currency","amount","requestPayerName","requestPayerEmail","canMakePayment","payWithStripe","cardElement","getElement","CardElement","createPaymentMethod","card","paymentMethod","onSubmit","App","path","component","exact","OrderComplete","animated","render","cname","from","to","Boolean","window","hostname","match","initializeApp","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","measurementId","enableRedirectHandling","rootReducer","firestoreReducer","firebaseStore","createStore","rrfProps","config","userProfile","presence","sessions","createFirestoreInstance","stripePromise","loadStripe","ReactDOM","store","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"uLAAA,IAAIA,EAAM,CACT,kCAAmC,CAClC,IACA,IAED,iCAAkC,CACjC,IACA,IAED,2BAA4B,CAC3B,IACA,IAED,0BAA2B,CAC1B,IACA,IAED,2BAA4B,CAC3B,IACA,IAED,0BAA2B,CAC1B,IACA,IAED,8BAA+B,CAC9B,IACA,IAED,6BAA8B,CAC7B,IACA,IAED,iCAAkC,CACjC,IACA,IAED,gCAAiC,CAChC,IACA,IAED,8BAA+B,CAC9B,IACA,IAED,6BAA8B,CAC7B,IACA,IAED,8BAA+B,CAC9B,IACA,IAED,6BAA8B,CAC7B,IACA,IAED,4BAA6B,CAC5B,IACA,IAED,2BAA4B,CAC3B,IACA,IAED,8BAA+B,CAC9B,IACA,IAED,6BAA8B,CAC7B,IACA,IAED,0BAA2B,CAC1B,IACA,IAED,yBAA0B,CACzB,IACA,IAED,uBAAwB,CACvB,IACA,IAED,gCAAiC,CAChC,IACA,IAED,+BAAgC,CAC/B,IACA,IAED,2BAA4B,CAC3B,IACA,IAED,0BAA2B,CAC1B,IACA,IAED,qBAAsB,CACrB,IACA,IAED,uCAAwC,CACvC,IACA,IAED,sCAAuC,CACtC,IACA,IAED,2BAA4B,CAC3B,IACA,IAED,0BAA2B,CAC1B,IACA,IAED,mCAAoC,CACnC,IACA,IAED,kCAAmC,CAClC,IACA,IAED,4BAA6B,CAC5B,IACA,IAED,2BAA4B,CAC3B,IACA,IAED,6BAA8B,CAC7B,IACA,IAED,4BAA6B,CAC5B,IACA,IAED,4BAA6B,CAC5B,IACA,IAED,2BAA4B,CAC3B,IACA,IAED,2BAA4B,CAC3B,IACA,IAED,0BAA2B,CAC1B,IACA,IAED,uBAAwB,CACvB,IACA,IAED,6BAA8B,CAC7B,IACA,IAED,4BAA6B,CAC5B,IACA,IAED,kCAAmC,CAClC,IACA,IAED,iCAAkC,CACjC,IACA,IAED,6BAA8B,CAC7B,IACA,IAED,4BAA6B,CAC5B,IACA,IAED,2BAA4B,CAC3B,IACA,IAED,0BAA2B,CAC1B,IACA,IAED,iCAAkC,CACjC,IACA,IAED,gCAAiC,CAChC,IACA,IAED,+BAAg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","file":"static/js/main.c6add573.chunk.js","sourcesContent":["var map = {\n\t\"./ion-action-sheet-ios.entry.js\": [\n\t\t507,\n\t\t29\n\t],\n\t\"./ion-action-sheet-md.entry.js\": [\n\t\t508,\n\t\t30\n\t],\n\t\"./ion-alert-ios.entry.js\": [\n\t\t509,\n\t\t31\n\t],\n\t\"./ion-alert-md.entry.js\": [\n\t\t510,\n\t\t32\n\t],\n\t\"./ion-app_8-ios.entry.js\": [\n\t\t511,\n\t\t13\n\t],\n\t\"./ion-app_8-md.entry.js\": [\n\t\t512,\n\t\t14\n\t],\n\t\"./ion-avatar_3-ios.entry.js\": [\n\t\t513,\n\t\t33\n\t],\n\t\"./ion-avatar_3-md.entry.js\": [\n\t\t514,\n\t\t34\n\t],\n\t\"./ion-back-button-ios.entry.js\": [\n\t\t515,\n\t\t35\n\t],\n\t\"./ion-back-button-md.entry.js\": [\n\t\t516,\n\t\t36\n\t],\n\t\"./ion-backdrop-ios.entry.js\": [\n\t\t517,\n\t\t79\n\t],\n\t\"./ion-backdrop-md.entry.js\": [\n\t\t518,\n\t\t80\n\t],\n\t\"./ion-button_2-ios.entry.js\": [\n\t\t519,\n\t\t37\n\t],\n\t\"./ion-button_2-md.entry.js\": [\n\t\t520,\n\t\t38\n\t],\n\t\"./ion-card_5-ios.entry.js\": [\n\t\t521,\n\t\t39\n\t],\n\t\"./ion-card_5-md.entry.js\": [\n\t\t522,\n\t\t40\n\t],\n\t\"./ion-checkbox-ios.entry.js\": [\n\t\t523,\n\t\t41\n\t],\n\t\"./ion-checkbox-md.entry.js\": [\n\t\t524,\n\t\t42\n\t],\n\t\"./ion-chip-ios.entry.js\": [\n\t\t525,\n\t\t43\n\t],\n\t\"./ion-chip-md.entry.js\": [\n\t\t526,\n\t\t44\n\t],\n\t\"./ion-col_3.entry.js\": [\n\t\t527,\n\t\t81\n\t],\n\t\"./ion-datetime_3-ios.entry.js\": [\n\t\t528,\n\t\t19\n\t],\n\t\"./ion-datetime_3-md.entry.js\": [\n\t\t529,\n\t\t20\n\t],\n\t\"./ion-fab_3-ios.entry.js\": [\n\t\t530,\n\t\t45\n\t],\n\t\"./ion-fab_3-md.entry.js\": [\n\t\t531,\n\t\t46\n\t],\n\t\"./ion-img.entry.js\": [\n\t\t532,\n\t\t82\n\t],\n\t\"./ion-infinite-scroll_2-ios.entry.js\": [\n\t\t533,\n\t\t83\n\t],\n\t\"./ion-infinite-scroll_2-md.entry.js\": [\n\t\t534,\n\t\t84\n\t],\n\t\"./ion-input-ios.entry.js\": [\n\t\t535,\n\t\t47\n\t],\n\t\"./ion-input-md.entry.js\": [\n\t\t536,\n\t\t48\n\t],\n\t\"./ion-item-option_3-ios.entry.js\": [\n\t\t537,\n\t\t49\n\t],\n\t\"./ion-item-option_3-md.entry.js\": [\n\t\t538,\n\t\t50\n\t],\n\t\"./ion-item_8-ios.entry.js\": [\n\t\t539,\n\t\t51\n\t],\n\t\"./ion-item_8-md.entry.js\": [\n\t\t540,\n\t\t52\n\t],\n\t\"./ion-loading-ios.entry.js\": [\n\t\t541,\n\t\t53\n\t],\n\t\"./ion-loading-md.entry.js\": [\n\t\t542,\n\t\t54\n\t],\n\t\"./ion-menu_3-ios.entry.js\": [\n\t\t543,\n\t\t55\n\t],\n\t\"./ion-menu_3-md.entry.js\": [\n\t\t544,\n\t\t56\n\t],\n\t\"./ion-modal-ios.entry.js\": [\n\t\t545,\n\t\t15\n\t],\n\t\"./ion-modal-md.entry.js\": [\n\t\t546,\n\t\t16\n\t],\n\t\"./ion-nav_2.entry.js\": [\n\t\t547,\n\t\t25\n\t],\n\t\"./ion-popover-ios.entry.js\": [\n\t\t548,\n\t\t17\n\t],\n\t\"./ion-popover-md.entry.js\": [\n\t\t549,\n\t\t18\n\t],\n\t\"./ion-progress-bar-ios.entry.js\": [\n\t\t550,\n\t\t57\n\t],\n\t\"./ion-progress-bar-md.entry.js\": [\n\t\t551,\n\t\t58\n\t],\n\t\"./ion-radio_2-ios.entry.js\": [\n\t\t552,\n\t\t59\n\t],\n\t\"./ion-radio_2-md.entry.js\": [\n\t\t553,\n\t\t60\n\t],\n\t\"./ion-range-ios.entry.js\": [\n\t\t554,\n\t\t61\n\t],\n\t\"./ion-range-md.entry.js\": [\n\t\t555,\n\t\t62\n\t],\n\t\"./ion-refresher_2-ios.entry.js\": [\n\t\t556,\n\t\t63\n\t],\n\t\"./ion-refresher_2-md.entry.js\": [\n\t\t557,\n\t\t64\n\t],\n\t\"./ion-reorder_2-ios.entry.js\": [\n\t\t558,\n\t\t27\n\t],\n\t\"./ion-reorder_2-md.entry.js\": [\n\t\t559,\n\t\t28\n\t],\n\t\"./ion-ripple-effect.entry.js\": [\n\t\t560,\n\t\t85\n\t],\n\t\"./ion-route_4.entry.js\": [\n\t\t561,\n\t\t65\n\t],\n\t\"./ion-searchbar-ios.entry.js\": [\n\t\t562,\n\t\t66\n\t],\n\t\"./ion-searchbar-md.entry.js\": [\n\t\t563,\n\t\t67\n\t],\n\t\"./ion-segment_2-ios.entry.js\": [\n\t\t564,\n\t\t68\n\t],\n\t\"./ion-segment_2-md.entry.js\": [\n\t\t565,\n\t\t69\n\t],\n\t\"./ion-select_3-ios.entry.js\": [\n\t\t566,\n\t\t70\n\t],\n\t\"./ion-select_3-md.entry.js\": [\n\t\t567,\n\t\t71\n\t],\n\t\"./ion-slide_2-ios.entry.js\": [\n\t\t568,\n\t\t86\n\t],\n\t\"./ion-slide_2-md.entry.js\": [\n\t\t569,\n\t\t87\n\t],\n\t\"./ion-spinner.entry.js\": [\n\t\t570,\n\t\t23\n\t],\n\t\"./ion-split-pane-ios.entry.js\": [\n\t\t571,\n\t\t88\n\t],\n\t\"./ion-split-pane-md.entry.js\": [\n\t\t572,\n\t\t89\n\t],\n\t\"./ion-tab-bar_2-ios.entry.js\": [\n\t\t573,\n\t\t72\n\t],\n\t\"./ion-tab-bar_2-md.entry.js\": [\n\t\t574,\n\t\t73\n\t],\n\t\"./ion-tab_2.entry.js\": [\n\t\t575,\n\t\t26\n\t],\n\t\"./ion-text.entry.js\": [\n\t\t576,\n\t\t74\n\t],\n\t\"./ion-textarea-ios.entry.js\": [\n\t\t577,\n\t\t75\n\t],\n\t\"./ion-textarea-md.entry.js\": [\n\t\t578,\n\t\t76\n\t],\n\t\"./ion-toast-ios.entry.js\": [\n\t\t579,\n\t\t77\n\t],\n\t\"./ion-toast-md.entry.js\": [\n\t\t580,\n\t\t78\n\t],\n\t\"./ion-toggle-ios.entry.js\": [\n\t\t581,\n\t\t21\n\t],\n\t\"./ion-toggle-md.entry.js\": [\n\t\t582,\n\t\t22\n\t],\n\t\"./ion-virtual-scroll.entry.js\": [\n\t\t583,\n\t\t90\n\t]\n};\nfunction webpackAsyncContext(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\treturn Promise.resolve().then(function() {\n\t\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\t\te.code = 'MODULE_NOT_FOUND';\n\t\t\tthrow e;\n\t\t});\n\t}\n\n\tvar ids = map[req], id = ids[0];\n\treturn __webpack_require__.e(ids[1]).then(function() {\n\t\treturn __webpack_require__(id);\n\t});\n}\nwebpackAsyncContext.keys = function webpackAsyncContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackAsyncContext.id = 286;\nmodule.exports = webpackAsyncContext;","var map = {\n\t\"./ion-icon.entry.js\": [\n\t\t587,\n\t\t93\n\t]\n};\nfunction webpackAsyncContext(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\treturn Promise.resolve().then(function() {\n\t\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\t\te.code = 'MODULE_NOT_FOUND';\n\t\t\tthrow e;\n\t\t});\n\t}\n\n\tvar ids = map[req], id = ids[0];\n\treturn __webpack_require__.e(ids[1]).then(function() {\n\t\treturn __webpack_require__(id);\n\t});\n}\nwebpackAsyncContext.keys = function webpackAsyncContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackAsyncContext.id = 288;\nmodule.exports = webpackAsyncContext;","import {\n  IonContent,\n  IonIcon,\n  IonItem,\n  IonLabel,\n  IonList,\n  IonListHeader,\n  IonMenu,\n  IonMenuToggle,\n  IonNote,\n  IonAvatar,\n  IonImg,\n  IonFooter\n} from \"@ionic/react\";\n\nimport React, { useState, useEffect } from \"react\";\nimport { useLocation, useHistory } from \"react-router-dom\";\nimport {\n  bookmarkOutline,\n  rocketOutline\n} from \"ionicons/icons\";\nimport \"./Menu.css\";\nimport { AppPage, RootState } from \"../model/DomainModels\";\nimport { useFirebase, isLoaded, isEmpty } from \"react-redux-firebase\";\nimport { useSelector } from \"react-redux\";\nimport { UserInfo } from \"@firebase/auth-types\";\nimport { menuController } from \"@ionic/core\";\n// import firebase from \"firebase\";\n\nconst appPages: AppPage[] = [\n  {\n    title: \"My Profile\",\n    url: \"/page/MyProfile\",\n    iosIcon: rocketOutline,\n    mdIcon: rocketOutline\n  },\n  {\n    title: \"Check Out\",\n    url: \"/page/checkout\",\n    iosIcon: rocketOutline,\n    mdIcon: rocketOutline\n  },\n  {\n    title: \"Apple Pay\",\n    url: \"/page/applepay\",\n    iosIcon: rocketOutline,\n    mdIcon: rocketOutline\n  }\n\n  // {\n  //   title: 'Outbox',\n  //   url: '/page/Outbox',\n  //   iosIcon: paperPlaneOutline,\n  //   mdIcon: paperPlaneSharp\n  // },\n  // {\n  //   title: 'Favorites',\n  //   url: '/page/Favorites',\n  //   iosIcon: heartOutline,\n  //   mdIcon: heartSharp\n  // },\n  // {\n  //   title: 'Archived',\n  //   url: '/page/Archived',\n  //   iosIcon: archiveOutline,\n  //   mdIcon: archiveSharp\n  // },\n  // {\n  //   title: 'Trash',\n  //   url: '/page/Trash',\n  //   iosIcon: trashOutline,\n  //   mdIcon: trashSharp\n  // },\n  // {\n  //   title: 'Spam',\n  //   url: '/page/Spam',\n  //   iosIcon: warningOutline,\n  //   mdIcon: warningSharp\n  // }\n];\n\nconst labels = [\"#11321\", \"#21322\", \"#43211\"];\n\nconst Menu: React.FC = () => {\n  const location = useLocation();\n  const firebase = useFirebase();\n  const history = useHistory();\n  const [userPhoto, setUserPhoto] = useState(\"\");\n  const auth: UserInfo = useSelector<RootState>(\n    state => state.firebase.auth\n  ) as UserInfo;\n  console.log(auth);\n\n  useEffect(() => {\n    if (isLoaded(auth) && !isEmpty(auth)) {\n      console.clear();\n      // console.log(\"User Logged in and user is:==\" + JSON.stringify(auth));\n      // history.push(\"/\");\n    }\n    setUserPhoto(auth.photoURL as string);\n  }, [auth, auth.photoURL]);\n\n  function handleSignOut() {\n    setUserPhoto(\"\");\n    firebase.logout().then(() => {\n      history.push(\"/\");\n    });\n  }\n  return (\n    <IonMenu contentId=\"main\" type=\"overlay\" side=\"end\">\n      <IonContent>\n        <IonList id=\"inbox-list\">\n          <IonListHeader>\n            <IonItem lines=\"none\">{auth.displayName}</IonItem>\n            <IonAvatar>\n              {userPhoto ? <IonImg src={userPhoto}></IonImg> : <p></p>}\n            </IonAvatar>\n          </IonListHeader>\n          <IonNote>{auth.email}</IonNote>\n          {appPages.map((appPage, index) => {\n            return (\n              <IonMenuToggle key={index} autoHide={false}>\n                <IonItem\n                  className={\n                    location.pathname === appPage.url ? \"selected\" : \"\"\n                  }\n                  routerLink={appPage.url}\n                  routerDirection=\"none\"\n                  lines=\"none\"\n                  detail={false}\n                >\n                  <IonIcon slot=\"start\" icon={appPage.iosIcon} />\n                  <IonLabel>{appPage.title}</IonLabel>\n                </IonItem>\n              </IonMenuToggle>\n            );\n          })}\n        </IonList>\n\n        <IonList id=\"labels-list\">\n          <IonListHeader>Previous Orders</IonListHeader>\n          {labels.map((label, index) => (\n            <IonItem lines=\"none\" key={index}>\n              <IonIcon slot=\"start\" icon={bookmarkOutline} />\n              <IonLabel>{label}</IonLabel>\n            </IonItem>\n          ))}\n        </IonList>\n        <IonFooter onClick={async () => await menuController.toggle()}>\n          {isLoaded(auth) && !isEmpty(auth) ? (\n            <IonItem onClick={handleSignOut}>Sign Out</IonItem>\n          ) : (\n              <IonItem routerLink=\"/login\" routerDirection=\"none\" detail={false} >Sign In</IonItem>\n            )\n          }\n        </IonFooter>\n      </IonContent>\n    </IonMenu>\n  );\n};\n\nexport default Menu;","import React from \"react\";\nimport \"./ExploreContainer.css\";\nimport { ContainerProps } from \"../model/ComponentProps\";\n\nconst ExploreContainer: React.FC<ContainerProps> = ({ name }) => {\n  return (\n    <div className=\"container\">\n      <strong>{name}</strong>\n      <p>\n        Explore{\" \"}\n        <a\n          target=\"_blank\"\n          rel=\"noopener noreferrer\"\n          href=\"https://ionicframework.com/docs/components\"\n        >\n          UI Components\n        </a>\n      </p>\n    </div>\n  );\n};\n\nexport default ExploreContainer;\n","import {\n  IonButtons,\n  IonContent,\n  IonHeader,\n  IonMenuButton,\n  IonPage,\n  IonTitle,\n  IonToolbar,\n  IonButton\n} from \"@ionic/react\";\nimport React from \"react\";\nimport { useParams } from \"react-router\";\nimport ExploreContainer from \"../components/ExploreContainer\";\nimport \"./Page.css\";\nimport {\n  useFirestoreConnect,\n  FirestoreReducer,\n  getFirebase\n} from \"react-redux-firebase\";\nimport { useSelector } from \"react-redux\";\nimport \"firebase/firestore\";\nimport hifreshdata from \"../data/hmarketitems.json\";\nimport { Categories, Markets, RootState } from \"../model/DomainModels\";\nimport { cfaSignIn } from \"capacitor-firebase-auth\";\nimport { User } from \"@firebase/auth-types\";\n\ninterface testprop {\n  market: Markets;\n  doc: string;\n}\n\nconst Page: React.FC = () => {\n  const { name } = useParams<{ name: string }>();\n\n  console.log(hifreshdata);\n  var keys = Object.keys(hifreshdata);\n  var values = Object.values(hifreshdata);\n\n  console.log(keys);\n\n  var upload_categories = [] as Categories[];\n\n  var i = 0;\n  keys.forEach(key => {\n    upload_categories.push({\n      id: i,\n      img_url: \"\",\n      name: key,\n\n      load_order: 0\n    });\n    i++;\n  });\n\n  console.log(values[0]);\n  values[0].forEach(obj => {\n    console.log(obj);\n  });\n  useFirestoreConnect([{ collection: \"Markets\" }]);\n\n  const markets = useSelector<RootState>(\n    state => state.firestore\n  ) as FirestoreReducer.Reducer;\n\n  console.log(markets.data);\n\n  var market = {} as Markets;\n  console.log(\"Categories\");\n  console.log(markets.data);\n  if (markets.ordered.Markets && markets.ordered.Markets.length > 0) {\n    markets.ordered.Markets.map(tmarket => {\n      console.log(tmarket.name);\n      market = tmarket;\n      return market;\n    });\n  }\n\n  function googleLoginHandler() {\n    cfaSignIn(\"google.com\").subscribe((user: User) =>\n      console.log(user.displayName)\n    );\n    return \"\";\n  }\n  // const TestComponent = compose(\n  //   firestoreConnect(() => [\"Markets\"]), // or { collection: 'todos' }\n  //   connect((state, props) => ({\n  //     markets: state\n  //   }))\n  // )(Test);\n\n  function CreateMarket() {\n    const firebase = getFirebase();\n    // const firestore = getFirestore(firebase);\n    // firebase\n    //   .firestore()\n    //   .collection(\"Markets\")\n    //   .add(test_market)\n    //   .then(() => {\n    //     console.log(\"Add Completed\");\n    //   });\n\n    // keys.forEach((key, index) => {\n    //   upload_categories.push({\n    //     id: i,\n    //     img_url: \"\",\n    //     name: key\n    //   });\n    //   i++;\n    // });\n    var i = 0;\n    keys.forEach(key => {\n      firebase\n        .firestore()\n        .collection(\"Markets\")\n        .doc(\"FtSvVlEa4G4xHduMnf2l\")\n        .collection(\"Categories\")\n        .add({\n          img_url: \"\",\n          name: key,\n          load_order: i\n        })\n        .then(docRef => {\n          console.log(docRef);\n          var new_category_id = docRef.id;\n          console.log(\"Add Categories Completed\");\n\n          values[i].forEach(item => {\n            firebase\n              .firestore()\n              .collection(\"Markets\")\n              .doc(\"FtSvVlEa4G4xHduMnf2l\")\n              .collection(\"Categories\")\n              .doc(new_category_id)\n              .collection(\"Items\")\n              .add({\n                name: item.产品,\n                unit_price: item.售出单价,\n                unit: item.规格,\n                img_url: \"\",\n                store_name: \"\",\n                category_id: new_category_id,\n                category_name: key\n              })\n              .then(() => {\n                console.log(\"Added Items to category\");\n              });\n          });\n          i++;\n        });\n    });\n  }\n\n  function copyMarkets() {\n    const firebase = getFirebase();\n    const targetID = \"FtSvVlEa4G4xHduMnf2l\";\n    const sourceID = \"LX7x6b4dEkXvjRWb0rNK\";\n\n    firebase\n      .firestore()\n      .collection(\"Markets\")\n      .doc(sourceID)\n      .get()\n      .then(snapshot => {\n\n        console.log(snapshot.data());\n        firebase\n          .firestore()\n          .collection(\"Markets\")\n          .doc(targetID)\n          .update({ ...snapshot.data() })\n          .then(result => {\n            console.log(\"update successfully\");\n            console.log(result);\n          });\n      });\n  }\n\n  console.log(\"entering page\");\n  return (\n    <IonPage>\n      <IonHeader>\n        <IonToolbar>\n          <IonButtons slot=\"start\">\n            <IonMenuButton />\n          </IonButtons>\n          <IonTitle>{name}</IonTitle>\n        </IonToolbar>\n      </IonHeader>\n      {/* <FirestoreIonImg src=\"gs://slashiee.appspot.com/hifresh/categories/y2637HMBAxuFpC89igEL/organic_apple.png\" /> */}\n      <IonContent>\n        {/* <Test doc={doc_id} market={market} /> */}\n        <IonButton onClick={CreateMarket}>Test Creat Market</IonButton>\n        <IonButton onClick={copyMarkets}>Copy HiFresh Market</IonButton>\n        <IonHeader collapse=\"condense\">\n          <IonToolbar>\n            <IonTitle size=\"large\">{name}</IonTitle>\n          </IonToolbar>\n        </IonHeader>\n        <IonButton onClick={googleLoginHandler}> Google Login </IonButton>\n        <ExploreContainer name={name} />\n      </IonContent>\n    </IonPage>\n  );\n};\n\nexport default Page;\n","import React from \"react\";\nimport {\n  IonTabs,\n  IonTabBar,\n  IonTabButton,\n  IonIcon,\n  IonLabel,\n  IonBadge,\n  IonRouterOutlet\n} from \"@ionic/react\";\nimport {\n  informationCircle,\n  happy,\n  cartSharp,\n  heartCircle\n} from \"ionicons/icons\";\nimport { Redirect, Route } from \"react-router-dom\";\nimport Dashboard from \"../pages/Dashboard\";\nimport Market from \"../containers/Market\";\nimport MarketItems from \"../containers/MarketItems\";\nimport { MainTabsProps } from \"../model/ComponentProps\";\nimport ShopSelection from \"../pages/ShopSelection\";\n\nconst MainTabs: React.FC<MainTabsProps> = () => {\n  // const defaultProtectedRouteProps = getDefaultProtectedRouteProps();\n\n  return (\n    <IonTabs>\n      <IonTabBar slot=\"bottom\" >\n        <IonTabButton tab=\"today\" href=\"/tabs/dashboard\">\n          <IonIcon icon={happy} />\n          <IonLabel>Today</IonLabel>\n          <IonBadge>6</IonBadge>\n        </IonTabButton>\n\n        <IonTabButton tab=\"market\" href=\"/tabs/shop_selections/\">\n          <IonIcon icon={cartSharp} />\n          <IonLabel>Market</IonLabel>\n        </IonTabButton>\n\n        <IonTabButton tab=\"slashiee\">\n          <IonIcon icon={heartCircle} />\n          <IonLabel>My List</IonLabel>\n        </IonTabButton>\n\n        <IonTabButton tab=\"about\">\n          <IonIcon icon={informationCircle} />\n          <IonLabel>About</IonLabel>\n        </IonTabButton>\n      </IonTabBar>\n    </IonTabs>\n  );\n};\n\nexport default MainTabs;\n","import { AddressObj } from \"../model/DomainModels\";\n\nexport const INITIAL_STATE = {\n  address1: \"\",\n  address2: \"\",\n  suburb: \"\",\n  state: \"\",\n  postcode: \"\",\n  phone: \"\",\n  email: \"\"\n} as AddressObj;\n\nexport const ADD_ADDRESS1 = \"ADD_ADDRESS1\";\nexport const ADD_ADDRESS2 = \"ADD_ADDRESS2\";\nexport const ADD_SUBURB = \"ADD_SUBURB\";\nexport const ADD_STATE = \"ADD_STATE\";\nexport const ADD_PHONE = \"ADD_PHONE\";\nexport const ADD_POSTCODE = \"ADD_POSTCODE\";\nexport const ADD_EMAIL = \"ADD_EMAIL\";\n\nexport const addressReducer = (state = INITIAL_STATE, action: any) => {\n  // export default function cartReducer(state = INITIAL_STATE, action: any) {\n  switch (action.type) {\n    case ADD_ADDRESS1:\n      return {\n        ...state,\n        address1: action.payload\n      };\n    case ADD_ADDRESS2:\n      return {\n        ...state,\n        address2: action.payload\n      };\n    case ADD_SUBURB:\n      return {\n        ...state,\n        suburb: action.payload\n      };\n    case ADD_STATE:\n      return {\n        ...state,\n        state: action.payload\n      };\n    case ADD_POSTCODE:\n      return {\n        ...state,\n        postcode: action.payload\n      };\n    case ADD_PHONE:\n      return {\n        ...state,\n        phone: action.payload\n      };\n    case ADD_EMAIL:\n      return {\n        ...state,\n        email: action.payload\n      };\n    default:\n      return state;\n  }\n};\n\nexport default addressReducer;\n","import { FirebaseReducer, firebaseReducer } from \"react-redux-firebase\";\nimport { combineReducers, Reducer } from \"redux\";\nimport { CartStateType, ShopStateType } from \"../model/DomainModels\";\nimport addressReducer from \"./Address\";\n\nexport const INITIAL_STATE = {\n  cartItemList: [],\n  cart: {\n    total: 0.0\n  }\n} as CartStateType;\n\nexport const ADD_ITEM = \"ADD_ITEM\";\nexport const DEL_ITEM = \"DEL_ITEM\";\nexport const DEL_ITEM_GROUP = \"DEL_ITEM_GROUP\";\nexport const SET_CURRENT_SHOP = \"SET_CURRENT_SHOP\";\n\nexport const cartReducer = (state = INITIAL_STATE, action: any) => {\n  var x = 0;\n  // export default function cartReducer(state = INITIAL_STATE, action: any) {\n  switch (action.type) {\n    case ADD_ITEM:\n      // console.log(\"adding\");\n      return {\n        cartItemList: [...state.cartItemList, action.payload],\n        cart: {\n          total: (parseFloat(state.cart.total.toString()) +\n            parseFloat(action.payload.unit_price))\n        }\n      };\n    case DEL_ITEM:\n      return {\n        cartItemList: [\n          ...state.cartItemList\n            .map(obj => {\n              if (x === 0 && obj.id === action.payload.id) {\n                x = 1;\n                return null;\n              }\n              return obj;\n            })\n            .filter(obj => obj != null)\n        ],\n        cart: {\n          total: (parseFloat(state.cart.total.toString()) -\n            parseFloat(action.payload.unit_price))\n        }\n      };\n    case DEL_ITEM_GROUP:\n      var total = 0;\n      var newlist = state.cartItemList\n        .map(obj => {\n          if (obj.id === action.payload.id) {\n            return null;\n          }\n          total += obj.unit_price ? (parseFloat(obj.unit_price.toString())) : 0;\n          return obj;\n        })\n        .filter(obj => obj != null);\n      return {\n        cartItemList: [...newlist],\n        cart: {\n          total: total\n        }\n      };\n    default:\n      return state;\n  }\n};\n\n// Optional: If you use the user profile option\ninterface Profile {\n  name: string;\n  email: string;\n}\n\n// Optional: You can define the schema of your Firebase Redux store.\n// This will give you type-checking for state.firebase.data.todos and state.firebase.ordered.todos\ninterface Schema {\n  markets: Market;\n}\n\n// If you have a todos collection, you might have this type\ninterface Market {\n  id: string;\n  name: string;\n}\n\n// with both reducer types\ninterface RootState {\n  firebase: FirebaseReducer.Reducer<Profile, Schema>;\n  cart: Reducer<CartStateType>;\n  shop: Reducer<ShopStateType>;\n}\n\nexport const shopReducer = (state = { shop: {} }, action: any) => {\n  switch (action.type) {\n    case SET_CURRENT_SHOP:\n      return action.payload;\n    default:\n      return state;\n  }\n};\nconst rootReducer = combineReducers({\n  firebase: firebaseReducer,\n  cart: cartReducer,\n  shop: shopReducer,\n  address: addressReducer\n});\n\nexport default rootReducer;\n","import { ADD_ITEM, DEL_ITEM, DEL_ITEM_GROUP } from \"./Cart\";\nimport { ItemObj } from \"../model/DomainModels\";\n\nexport function addCartAction(newItem: ItemObj) {\n  return {\n    type: ADD_ITEM,\n    payload: newItem\n  };\n}\n\nexport function delCartAction(newItem: ItemObj) {\n  return {\n    type: DEL_ITEM,\n    payload: newItem\n  };\n}\nexport function delItemGroup(newItem: ItemObj) {\n  return {\n    type: DEL_ITEM_GROUP,\n    payload: newItem\n  };\n}\n\n","import React from \"react\";\nimport {\n  IonButton,\n  IonIcon,\n  IonGrid,\n  IonRow,\n  IonCol,\n  IonButtons,\n  IonItem\n} from \"@ionic/react\";\nimport { closeOutline } from \"ionicons/icons\";\nimport { CartWithQty, ItemObj } from \"../model/DomainModels\";\nimport {\n  addCartAction,\n  delCartAction,\n  delItemGroup\n} from \"../reducers/CartAction\";\nimport { useDispatch } from \"react-redux\";\nimport { CartState } from \"../services/FirebaseIniti\";\n\nconst ItemList: React.FC<CartState> = ({ cart }) => {\n  const dispatch = useDispatch();\n  const cartListWithQty: CartWithQty[] = [];\n  const cartListArray: Array<CartWithQty> = [];\n\n  console.log(cart.cartItemList);\n  cart.cartItemList.map(cartItem => {\n    if (cartListWithQty[cartItem.id] == null) {\n      cartListWithQty[cartItem.id] = {\n        key: cartItem.id,\n        item: cartItem,\n        count: 0\n      };\n    }\n    if (cartListWithQty[cartItem.id].count === 0) {\n      cartListWithQty[cartItem.id].count = 1;\n    } else {\n      cartListWithQty[cartItem.id].count++;\n    }\n    return {};\n  });\n  console.log(cartListWithQty);\n\n  for (var cartlistitemqty in cartListWithQty) {\n    cartListArray.push(cartListWithQty[cartlistitemqty]);\n    console.log(cartlistitemqty);\n  }\n  function addCart(cartItem: ItemObj) {\n    dispatch(addCartAction(cartItem));\n  }\n  function delCart(cartItem: ItemObj) {\n    dispatch(delCartAction(cartItem));\n  }\n\n  return (\n    <IonGrid>\n      <IonRow>\n        <IonCol size=\"2\"></IonCol>\n        <IonCol size=\"4\"></IonCol>\n        <IonCol size=\"3\" style={{ textAlign: \"center\" }}>Qty</IonCol>\n        <IonCol size=\"2.7\" style={{ textAlign: \"right\" }}>Total</IonCol>\n      </IonRow>\n      {cartListArray.map(cartWithQty => {\n        return (\n          <IonRow>\n            <IonCol size=\"2\">\n              <IonButton\n                size=\"small\"\n                fill=\"clear\"\n                onClick={() => {\n                  dispatch(delItemGroup(cartWithQty.item));\n                }}\n              >\n                <IonIcon slot=\"icon-only\" color=\"danger\" icon={closeOutline} />\n              </IonButton>\n            </IonCol>\n            <IonCol size=\"4\">\n              <IonItem lines=\"none\">{cartWithQty.item.name}</IonItem>\n            </IonCol>\n            <IonCol size=\"3\">\n              <IonButtons style={{ flexDirection: \"row\", justifyContent: \"space-around\" }}>\n                <IonButton\n                  fill=\"outline\"\n                  onClick={() => {\n                    delCart(cartWithQty.item);\n                  }}\n                >\n                  -\n                </IonButton>\n                {cartWithQty.count}\n                <IonButton\n                  fill=\"outline\"\n                  onClick={() => {\n                    addCart(cartWithQty.item);\n                  }}\n                >\n                  +\n                </IonButton>\n              </IonButtons>\n            </IonCol>\n            <IonCol size=\"2.7\" style={{ textAlign: \"right\", paddingRight: 0 }}>\n              <IonItem lines=\"none\" >\n                <p style={{ textAlign: \"right\", width: \"100%\" }}>${cartWithQty.item.unit_price}</p>\n              </IonItem>\n            </IonCol>\n          </IonRow>\n        );\n      })}\n    </IonGrid>\n  );\n};\n\nexport default ItemList;\n","import React from \"react\";\nimport { IonItem, IonItemDivider, IonIcon, IonRadioGroup, IonRadio, IonLabel, IonList } from \"@ionic/react\";\nimport { PaymentProps } from \"../model/ComponentProps\";\nimport { chevronForwardOutline } from 'ionicons/icons';\n\nconst Payment: React.FC<PaymentProps> = ({ payment, onChange }) => {\n  return (\n    <IonList>\n      <IonItemDivider style={{ backgroundColor: \"#f7f7f7\", paddingTop: 10, paddingBottom: 10 }}>\n        <IonIcon slot=\"start\" src=\"assets/icon/1x/SVG/credit-card.svg\"></IonIcon>\n        <IonLabel color=\"primary\" style={{ paddingLeft: 10 }}>HOW TO PAY?</IonLabel>\n      </IonItemDivider>\n      <IonRadioGroup value={payment} onIonChange={e => onChange(e.detail.value)}>\n\n        <IonItem lines=\"none\">\n          <IonRadio slot=\"start\" value=\"direct_debit\"></IonRadio>\n          <IonLabel>\n            <p>Direct Debit</p>\n            <p>Bank Account number XXXX 1234</p>\n          </IonLabel>\n          <IonIcon slot=\"end\" color=\"primary\" icon={chevronForwardOutline}></IonIcon>\n        </IonItem>\n        <IonItem lines=\"none\">\n          <IonRadio slot=\"start\" value=\"visa_master\"></IonRadio>\n          <IonLabel>\n            <p>Debit or Credit card XXXX 4321</p>\n          </IonLabel>\n          <IonIcon slot=\"end\" color=\"primary\" icon={chevronForwardOutline}></IonIcon>\n        </IonItem>\n        <IonItem lines=\"none\">\n          <IonRadio slot=\"start\" value=\"paypal\"></IonRadio>\n          <IonLabel>\n            <p>Paypal</p>\n          </IonLabel>\n        </IonItem>\n        <IonItem lines=\"none\">\n          <IonRadio slot=\"start\" value=\"cod\"></IonRadio>\n          <IonLabel><p>Cash on Delivery</p></IonLabel>\n        </IonItem>\n      </IonRadioGroup>\n    </IonList>\n  );\n};\n\nexport default Payment;\n","import React from \"react\";\nimport \"./ExploreContainer.css\";\nimport {\n  IonItem,\n  IonCol,\n  IonRow,\n  IonGrid,\n  IonText,\n  IonImg\n} from \"@ionic/react\";\nimport { ShopHeaderProps } from \"../model/ComponentProps\";\nimport { Markets } from \"../model/DomainModels\";\nimport { isLoaded } from \"react-redux-firebase\";\n\nconst ShopHeader: React.FC<ShopHeaderProps> = ({ shop }) => {\n  var loadedShop = {} as Markets;\n\n  if (isLoaded(shop)) {\n    loadedShop = shop.shop;\n  }\n\n  console.log(loadedShop);\n\n  return (\n    <IonGrid>\n      <IonRow>\n        <IonCol size=\"4\">\n          <IonImg src={loadedShop.img_url as string}></IonImg>\n        </IonCol>\n        <IonCol size=\"7.8\" style={{}}>\n          <IonImg className=\"category_payments\" src=\"/assets/img/payments.png\"></IonImg>\n          <IonItem lines=\"none\">\n            <IonText style={{ textAlign: \"right\" }}>{loadedShop.free_delivery_conditions}</IonText>\n          </IonItem>\n        </IonCol>\n      </IonRow>\n    </IonGrid>\n  );\n};\n\nexport default ShopHeader;\n","import React from \"react\";\nimport { IonItem } from \"@ionic/react\";\nimport { ShopHeaderProps } from \"../model/ComponentProps\";\nimport { Markets } from \"../model/DomainModels\";\nimport { isLoaded } from \"react-redux-firebase\";\n\n\nconst ShopConditionAndOperatingHours: React.FC<ShopHeaderProps> = ({ shop }) => {\n\n  var loadedShop = {} as Markets;\n\n  if (isLoaded(shop)) {\n    loadedShop = shop.shop;\n  }\n  return (\n    <IonItem lines=\"none\" className=\"checkout_conditions\">\n      <p>{loadedShop.free_delivery_conditions}\n        <br />\n        {loadedShop.cut_off_terms}</p>\n    </IonItem>\n  );\n};\n\nexport default ShopConditionAndOperatingHours;\n","import React, { } from \"react\";\nimport {\n  IonItem,\n  IonInput,\n  IonLabel,\n  IonList, IonIcon,\n  IonItemDivider\n} from \"@ionic/react\";\nimport { AddressProps } from \"../model/ComponentProps\";\n\nconst AddressForm: React.FC<AddressProps> = ({ address, onAddressChange }) => {\n  // const dispatch = useDispatch();\n  // const address = {} as AddressObj;\n  // let address1 = {\n  //   address1: address.address1,\n  //   address2: address.address2,\n  //   suburb: address.suburb,\n  //   state: address.state,\n  //   postcode: address.postcode,\n  //   phone: address.phone,\n  //   email: address.email\n  // }\n  // useEffect(() => {\n  //   var possibleAddresses = fetchAddressFinder(address.address1);\n  //   console.log(possibleAddresses);\n  // }, [address]);\n\n  // console.log(address);\n  return (\n    <IonList>\n      <IonItemDivider style={{ backgroundColor: \"#f7f7f7\", paddingTop: 10, paddingBottom: 10 }}>\n        <IonIcon slot=\"start\" src=\"assets/icon/1x/SVG/delivery.svg\"></IonIcon>\n        <IonLabel color=\"primary\" style={{ paddingLeft: 10 }}>WHERE TO?</IonLabel>\n      </IonItemDivider>\n      <IonItem style={{ paddingRight: 16 }}>\n        <IonLabel id=\"contact_name\" color=\"medium\" position=\"floating\">\n          Contact Name\n        </IonLabel>\n        <IonInput placeholder=\"e.g. John\" required={true}\n          onIonChange={e => {\n            console.log(e);\n            onAddressChange({ ...address, name: e.detail.value })\n          }}></IonInput>\n      </IonItem>\n      <IonItem style={{ paddingRight: 16 }}>\n        <IonLabel id=\"address_line_1\" color=\"medium\" position=\"floating\">\n          Address Line 1 *\n        </IonLabel>\n        <IonInput placeholder=\"e.g. Level 3A, Levy walk\" required={true}\n          onIonChange={e => {\n            console.log(e);\n            onAddressChange({ ...address, address1: e.detail.value })\n          }}></IonInput>\n      </IonItem>\n      <IonItem style={{ paddingRight: 16 }}>\n        <IonLabel id=\"address_line_2\" color=\"medium\" position=\"floating\">\n          Address Line 2\n        </IonLabel>\n        <IonInput placeholder=\"e.g. Buildings\"\n          onIonChange={e => {\n            onAddressChange({ ...address, address2: e.detail.value })\n          }}></IonInput>\n      </IonItem>\n      <IonItem style={{ paddingRight: 16 }}>\n        <IonLabel id=\"suburb\" color=\"medium\" position=\"floating\">\n          Suburb\n        </IonLabel>\n        <IonInput placeholder=\"e.g CBD, Chatswood\" required={true}\n          onIonChange={e => {\n            onAddressChange({ ...address, suburb: e.detail.value })\n          }}></IonInput>\n      </IonItem>\n      <IonItem style={{ paddingRight: 16 }}>\n        <IonLabel id=\"state\" color=\"medium\" position=\"floating\">\n          State\n        </IonLabel>\n        <IonInput placeholder=\"e.g. NSW\"\n          onIonChange={e => {\n            onAddressChange({ ...address, state: e.detail.value })\n          }}></IonInput>\n      </IonItem>\n      <IonItem style={{ paddingRight: 16 }}>\n        <IonLabel id=\"postcode\" color=\"medium\" position=\"floating\">\n          Postcode\n        </IonLabel>\n        <IonInput placeholder=\"e.g. 2000\"\n          onIonChange={e => {\n            onAddressChange({ ...address, postcode: e.detail.value })\n          }}></IonInput>\n      </IonItem>\n      <IonItem style={{ paddingRight: 16 }}>\n        <IonLabel id=\"email\" color=\"medium\" position=\"floating\">\n          Email\n        </IonLabel>\n        <IonInput type=\"email\" placeholder=\"e.g. John@test.com \"\n          onIonChange={e => {\n            onAddressChange({ ...address, email: e.detail.value })\n            // dispatch(Actions.addEmailAction(e.detail.value!));\n          }}></IonInput>\n      </IonItem>\n      <IonItem style={{ paddingRight: 16 }}>\n        <IonLabel id=\"phone\" color=\"medium\" position=\"floating\">\n          Phone Number *\n        </IonLabel>\n        <IonInput type=\"tel\" placeholder=\"+61 321112321\"\n          onIonChange={e => {\n            onAddressChange({ ...address, phone: e.detail.value })\n            // dispatch(Actions.addPhoneAction(e.detail.value!));\n          }}></IonInput>\n      </IonItem>\n    </IonList>\n  );\n};\n\nexport default AddressForm;\n","import {\n  IonContent,\n  IonPage,\n  IonButton,\n  IonToolbar,\n  IonButtons,\n  IonIcon,\n  IonLabel,\n  IonCheckbox,\n  IonItem,\n  IonImg,\n  IonLoading\n} from \"@ionic/react\";\nimport React, { useState } from \"react\";\nimport { connect, useSelector } from \"react-redux\";\nimport ItemList from \"../components/ItemList\";\nimport Payment from \"../components/Payment\";\nimport { useHistory } from \"react-router-dom\";\nimport { closeOutline } from \"ionicons/icons\";\nimport { CheckoutProps } from \"../model/ComponentProps\";\nimport {\n  RootState,\n  CartStateType,\n  ShopStateType,\n  ProfileData,\n  AddressObj,\n  Invoice\n} from \"../model/DomainModels\";\nimport ShopHeader from \"../components/ShopHeader\";\nimport ShopConditionAndOperatingHours from \"../components/ShopConditionAndOperatingHours\";\nimport { CartState } from \"../services/FirebaseIniti\";\nimport { useFirebase,isEmpty } from \"react-redux-firebase\";\nimport AddressForm from \"../components/Address\";\n\ninterface MockInvoice {\n  // TODO: Please fix the DomainModels > Invoice object same as below write invoice function\n  id: string;\n  [key: string]: string | number | [] | any | null;\n}\n\nconst Checkout: React.FC<CheckoutProps> = () => {\n  const firebase = useFirebase();\n  const db = firebase.firestore();\n  const auth = useSelector<RootState>(state => state.firebase.auth);\n  const [addressObj, setAddress] = useState<AddressObj>({} as AddressObj);\n  const [aggreement, setAggreement] = useState<boolean>(false);\n  const [paymentType, setPaymentType] = useState<string>(\"none\");\n  const [invoiceId, setInvoiceId] = useState<string>(\"\");\n  const [invoice, setInvoice] = useState<MockInvoice>({} as MockInvoice);\n  const [showLoading, setShowLoading] = useState(false);\n\n  let history = useHistory();\n  // const [state] = useState<CartState>();\n\n  const [cartState, setCartState] = useState<CartStateType>({\n    cartItemList: [],\n    cart: {\n      total: 0.0\n    }\n  });\n\n  const [shopState, setShop] = useState<ShopStateType>({\n    shop: {\n      id: \"\",\n      name: \"\",\n      opening_hour: [],\n      free_delivery_conditions: \"\",\n      img_url: \"\",\n      store_address: \"\",\n      support_postcodes: [],\n      cut_off_terms: \"\",\n      service_offering: \"\"\n    }\n  });\n\n  function mapStateToProps(state: CartState) {\n    const { firebase, cart, shop, address } = state;\n    setCartState(cart);\n    setShop(shop);\n    return { firebase, cart, shop, address };\n  }\n\n  const CartItemList = connect(mapStateToProps)(ItemList);\n  const ShopHeaderWithShop = connect(mapStateToProps)(ShopHeader);\n  const EnhancedCondition = connect(mapStateToProps)(\n    ShopConditionAndOperatingHours\n  );\n  // const AddressComponent = connect(mapStateToProps)(Address);\n\n  function writeUserData(my_auth: any): Promise<void> {\n    let json_auth = JSON.parse(JSON.stringify(my_auth));\n    let user: ProfileData = {\n      providerId: json_auth.providerData[0].providerId,\n      display_name: json_auth.displayName, //displayName\n      payment_detail: \"\", //\n      contact_mobile: \"\",\n      address: addressObj,\n      photo_url: json_auth.photoURL, //photoURL we get from firebase.auth() when sign in completed\n      id: json_auth.uid, // uid  we get from firebase.auth() when sign in completed\n      email: json_auth.email\n    };\n    let invoice = {\n      id: \"\",\n      user_id: my_auth.uid,\n      market_id: shopState.shop.id,\n      market_name: shopState.shop.name,\n      address: addressObj,\n      total_amount: cartState.cart.total,\n      platform_charges: 135.0,\n      cut_off_terms: shopState.shop.cutoff_terms,\n      delivery_date: \"22 May 2020\",\n      order_date: \"12 May 2020\",\n      status: \"open\",\n      payment_status: \"pending\",\n      cart_total_cost_inc_GST: cartState.cart.total,\n      cart_items: cartState.cartItemList,\n      batch_id: \"\",\n      user: user,\n      payment_type: paymentType\n    };\n    setInvoice(invoice);\n    return db\n      .collection(\"Users\")\n      .doc(json_auth.uid)\n      .set(user)\n      .then(response => {\n        console.error(\"user updated:--\" + JSON.stringify(response));\n        return db\n          .collection(\"Invoices\")\n          .add(invoice)\n          .then(res => {\n            setInvoiceId(res.id);\n            invoice.id = res.id;\n            setInvoice(invoice);\n            history.push(\"/orders/\" + res.id);\n            console.clear();\n            console.log(\"Successfully inserted\");\n            setShowLoading(false);\n          })\n          .catch(err => {\n            console.log(\"Not inserted+==\" + JSON.stringify(err));\n          });\n      })\n      .catch(() => {\n        console.error(\"User not found\");\n      });\n  }\n\n  const handleComplete = async () => {\n    setShowLoading(true);\n    if (!addressObj.address1 || addressObj.address1 == \"\") {\n      alert(\"Please Type Address Line 1\");\n      setShowLoading(false);\n      return;\n    }\n    if (!addressObj.phone || addressObj.phone == \"\") {\n      alert(\"Please Type the Contact person number\");\n      setShowLoading(false);\n      return;\n    }\n    if (paymentType === \"\" || paymentType === \"none\") {\n      alert(\"Please select any payment option\");\n      setShowLoading(false);\n      return;\n    }\n    if (!aggreement) {\n      alert(\"Please check our aggreement\");\n      setShowLoading(false);\n      return;\n    }\n\n    if(cartState.cartItemList.length == 0){\n      alert(\"Please add products in card\");\n      setShowLoading(false);\n      return;\n    }\n\n    if(isEmpty(auth)){\n      alert(\"Please login to continue checkout\");\n      setShowLoading(false);\n      return;\n    }\n    try {\n      await writeUserData(auth);\n      // history.push(\"/orders/\" + invoice.id);\n      // console.clear();\n      // console.log(\"Successfully inserted\");\n      setShowLoading(false);\n    } catch (error) {\n      console.log(\"Can't insert the data for invoice\");\n      console.log(error);\n      setShowLoading(false);\n    }\n  };\n\n  // function renderInvoice() {\n\n  // }\n\n  // const completePayment = async () => {\n  // This block is optional -- only if you need to update order items/shipping\n  // methods in response to shipping method selections\n  // try {\n  //   const applePayTransaction = await ApplePay.makePaymentRequest({\n  //     items,\n  //     shippingMethods,\n  //     merchantIdentifier,\n  //     currencyCode,\n  //     countryCode,\n  //     billingAddressRequirement: ['name', 'email', 'phone'],\n  //     shippingAddressRequirement: 'none',\n  //     shippingType: 'shipping'\n  //   });\n\n  //   const transactionStatus = await completeTransactionWithMerchant(applePayTransaction);\n  //   await this.applePay.completeLastTransaction(transactionStatus);\n  // } catch {\n  //   // handle payment request error\n  //   // Can also handle stop complete transaction but these should normally not occur\n  // }\n\n  // // only if you started listening before\n  // await ApplePay.stopListeningForShippingContactSelection();\n  // }\n\n  // useEffect(() => {\n  //   console.log(\"address is:-\" + JSON.stringify(address));\n  // }, [auth, address]);\n\n  const closehandler = async () => {\n    history.goBack();\n  };\n\n  return (\n    <IonPage id=\"checkout\" className=\"checkout_page\">\n      <IonToolbar color=\"secondary\">\n        <IonButtons slot=\"end\">\n          <IonButton onClick={closehandler}>\n            <IonIcon\n              size=\"large\"\n              slot=\"icon-only\"\n              icon={closeOutline}\n            ></IonIcon>\n          </IonButton>\n        </IonButtons>\n      </IonToolbar>\n      <IonContent>\n        <ShopHeaderWithShop />\n        <CartItemList />\n        <IonItem lines=\"none\">\n          <IonLabel color=\"primary\" style={{ textAlign: \"right\" }}>\n            Total incl GST ${cartState.cart.total}\n          </IonLabel>\n        </IonItem>\n        <EnhancedCondition />\n        <AddressForm address={addressObj} onAddressChange={setAddress} />\n        <br></br>\n        <Payment payment={paymentType} onChange={setPaymentType} />\n        <IonItem lines=\"none\">\n          <IonImg\n            class=\"footer_pay\"\n            slot=\"start\"\n            src=\"/assets/icon/1x/payment.png\"\n          ></IonImg>\n        </IonItem>\n        <IonItem lines=\"none\">\n          <IonCheckbox\n            slot=\"start\"\n            checked={aggreement}\n            onIonChange={e => {\n              setAggreement(e.detail.checked);\n            }}\n          ></IonCheckbox>\n          <IonLabel>\n            <p>I read and agree on our Terms and Conditions</p>\n          </IonLabel>\n        </IonItem>\n        <IonItem lines=\"none\">\n          <IonButtons slot=\"end\">\n            <IonButton\n              color=\"secondary\"\n              fill=\"outline\"\n              onClick={handleComplete}\n            >\n              Continue Shopping\n            </IonButton>\n            <IonButton color=\"secondary\" fill=\"solid\" onClick={handleComplete}>\n              Confirm\n            </IonButton>\n          </IonButtons>\n          <IonLoading\n            isOpen={showLoading}\n            onDidDismiss={() => setShowLoading(false)}\n            message={\"Please wait...\"}\n            duration={5000}\n          />\n        </IonItem>\n        <br></br>\n      </IonContent>\n    </IonPage>\n  );\n};\n\nexport default Checkout;\n","import React from \"react\";\nimport {\n  IonHeader,\n  IonToolbar,\n  IonImg,\n  IonMenuButton\n} from \"@ionic/react\";\n\nconst MainHeader: React.FC = () => {\n  return (\n    <IonHeader>\n      <IonToolbar>\n          <IonMenuButton slot='end' />\n      </IonToolbar>\n      <IonImg class=\"startmall_header \" src=\"/assets/icon/1x/logo2.png\" />\n    </IonHeader>\n  );\n};\n\nexport default MainHeader;\n","import {\n  IonContent,\n  IonPage,\n  IonImg,\n  IonItem,\n  IonInput,\n  IonButton,\n  IonFooter\n} from \"@ionic/react\";\nimport React, { useState } from \"react\";\nimport MainHeader from \"../components/MainHeader\";\nimport { useHistory } from \"react-router\";\n\nconst Dashboard: React.FC = () => {\n  console.log(\"entering Dashboard\");\n  const [postcode,setPostCode] = useState<string>();\n  const history = useHistory();\n  // SplashScreen.show({\n  //   showDuration: 2000,\n  //   autoHide: true\n  // });\n  let elements = document.querySelectorAll(\"ion-tab-bar\");\n\n  if (elements != null) {\n    Object.keys(elements).map((key: any) => {\n      elements[key].className = \"hide\";\n    });\n  }\n\n  function handleSearch() {\n    if(postcode == \"\"){\n      alert(\"Please enter postcode\");\n      return;\n    }\n    history.push(\"/tabs/shop_selections/\"+postcode)\n  }\n\n  return (\n    <IonPage>\n      <MainHeader />\n\n      <IonContent fullscreen>\n        <IonImg className=\"dashboard_ad\" src=\"/assets/icon/1x/cover.png\" />\n        <div className=\"dashboard_main\">\n          <IonItem>\n            <IonInput\n              autofocus={true}\n              className=\"postcode_input\"\n              inputMode=\"numeric\"\n              placeholder=\"Enter postcode to search\"\n              onIonChange={e => {\n                let value = e.detail.value\n                setPostCode(value+\"\")\n              }}\n            ></IonInput>\n            <IonButton onClick={handleSearch}> Search</IonButton>\n          </IonItem>\n\n          <IonImg src=\"/assets/img/instructions.png\" />\n        </div>\n      </IonContent>\n      <IonFooter>\n        <IonItem lines=\"none\">\n          <IonImg\n            class=\"footer_pay\"\n            slot=\"start\"\n            src=\"/assets/icon/1x/payment.png\"\n          ></IonImg>\n          <IonButton slot=\"end\"> Order now </IonButton>\n        </IonItem>\n      </IonFooter>\n    </IonPage>\n  );\n};\n\nexport default Dashboard;","import React from \"react\";\nimport { CartState } from \"../services/FirebaseIniti\";\nimport { IonItem } from \"@ionic/react\";\n\nconst CartTotal: React.FC<CartState> = ({ cart }) => {\n  // let cart1 = JSON.parse(JSON.stringify(cart));\n  // console.log(\"cart is :--\" + JSON.stringify(cart1));\n  return (\n    <IonItem>Total: ${cart.cart.total}</IonItem>\n  )\n};\n\nexport default CartTotal;\n","import React from \"react\";\nimport {\n  IonModal,\n  IonButton,\n  IonContent,\n  IonHeader,\n  IonToolbar,\n  IonButtons,\n  IonIcon,\n  IonFooter\n} from \"@ionic/react\";\nimport { connect } from \"react-redux\";\nimport { closeOutline } from \"ionicons/icons\";\nimport ItemList from \"../components/ItemList\";\nimport { useHistory } from \"react-router-dom\";\nimport { CartProps } from \"../model/ComponentProps\";\nimport { CartState } from \"../services/FirebaseIniti\";\nimport CartTotal from \"../components/CartTotal\";\n\nconst Cart: React.FC<CartProps> = ({ modal, closehandler }) => {\n  let history = useHistory();\n  function mapStateToProps(state: CartState) {\n    const { firebase, cart, shop, address } = state;\n    return { firebase, cart, shop, address };\n  }\n  function handleCheckOut() {\n    history.push(\"/page/checkout\");\n    closehandler();\n  }\n\n  const CartItemList = connect(mapStateToProps)(ItemList);\n  const EnhancedCartTotal = connect(mapStateToProps)(CartTotal);\n\n  return (\n    <IonModal isOpen={modal}>\n      <IonHeader>\n        <IonToolbar>\n          <IonButtons slot=\"end\">\n            <IonButton onClick={closehandler}>\n              <IonIcon\n                size=\"large\"\n                slot=\"icon-only\"\n                icon={closeOutline}\n              ></IonIcon>\n            </IonButton>\n          </IonButtons>\n        </IonToolbar>\n      </IonHeader>\n      <IonContent className=\"checkout_page\">\n        <CartItemList />\n      </IonContent>\n      <IonFooter>\n        <EnhancedCartTotal />\n        <IonButton expand=\"full\" onClick={handleCheckOut}>\n          Check Out\n          </IonButton>\n      </IonFooter>\n    </IonModal>\n  );\n};\n\nexport default Cart;\n","import React, { useState } from \"react\";\nimport { useFirebase } from \"react-redux-firebase\";\nimport { IonImg } from \"@ionic/react\";\n\ninterface GetURLProps {\n  src: string;\n}\nexport const FirestoreIonImg: React.FC<GetURLProps> = ({ src }) => {\n  var [downloadUrl, setDownloadUrl] = useState(src);\n  var storage = useFirebase().storage();\n  if (src.startsWith(\"gs\")) {\n    var imgref = storage.refFromURL(src);\n    console.log(\"Image Ref\");\n    console.log(imgref);\n    // Get the download URL\n    imgref\n      .getDownloadURL()\n      .then(function(url: string | any) {\n        // Insert url into an <img> tag to \"download\"\n        // Or inserted into an <img> element:\n        setDownloadUrl(url);\n        console.log (\"found URL\");\n        console.log (url);\n      })\n      .catch(function(error: any) {\n        // A full list of error codes is available at\n        // https://firebase.google.com/docs/storage/web/handle-errors\n        switch (error.code) {\n          case \"storage/object-not-found\":\n            // File doesn't exist\n            break;\n\n          case \"storage/unauthorized\":\n            // User doesn't have permission to access the object\n            break;\n\n          case \"storage/canceled\":\n            // User canceled the upload\n            break;\n          case \"storage/unknown\":\n            // Unknown error occurred, inspect the server response\n            break;\n        }\n      });\n  }\n\n  return <IonImg src={downloadUrl} />;\n};\n","import React from \"react\";\nimport { IonCard, IonCardHeader, IonCardSubtitle } from \"@ionic/react\";\nimport { CategoryProps } from \"../model/ComponentProps\";\nimport { FirestoreIonImg } from \"../services/FirebaseStorage\";\n\nconst CategoryItem: React.FC<CategoryProps> = ({ market_id, category }) => {\n  return (\n    <IonCard\n      routerLink={\"/tabs/market/\" + market_id + \"/item_list/\" + category.id}\n      class=\"category\"\n    >\n      <IonCardHeader>\n        <FirestoreIonImg src={category.img_url as string} />\n        {/* <IonImg src={category.img_url as string}></IonImg> */}\n        <IonCardSubtitle className=\"category_name\">{category.name}</IonCardSubtitle>\n      </IonCardHeader>\n    </IonCard>\n  );\n};\n\nexport default CategoryItem;\n","import React from \"react\";\nimport \"./ExploreContainer.css\";\nimport {\n  IonHeader,\n  IonGrid,\n  IonCol,\n  IonRow,\n  IonIcon} from \"@ionic/react\";\nimport { ellipsisHorizontalCircleOutline } from \"ionicons/icons\";\n\nconst OrderDayShopHeader: React.FC = () => {\n  return (\n    <IonHeader>\n      <IonGrid class=\"orderDayShopHeader\">\n        <IonRow>\n          <IonCol size=\"8\">\n            <IonGrid>\n              <IonRow>\n                <IonCol size=\"6\">Cutoff Order</IonCol>\n                <IonCol size=\"5\">12pm </IonCol>\n              </IonRow>\n              <IonRow>\n                <IonCol size=\"6\">Delivery Day</IonCol>\n                <IonCol size=\"5\">9am-3pm </IonCol>\n              </IonRow>\n            </IonGrid>\n          </IonCol>\n          <IonCol size=\"2\">\n            <IonIcon size=\"large\" icon={ellipsisHorizontalCircleOutline}></IonIcon>\n          </IonCol>\n        </IonRow>\n      </IonGrid>\n    </IonHeader>\n  );\n};\n\nexport default OrderDayShopHeader;\n","import {\n  IonButtons,\n  IonContent,\n  IonPage,\n  IonToolbar,\n  IonIcon,\n  IonGrid,\n  IonRow,\n  IonCol,\n  IonBadge,\n  IonButton,\n  IonItem\n} from \"@ionic/react\";\nimport { basket } from \"ionicons/icons\";\nimport React, { useState } from \"react\";\nimport \"./Market.css\";\nimport Cart from \"./Cart\";\nimport { connect } from \"react-redux\";\nimport data from \"../data/hmarketitems.json\";\nimport CategoryItem from \"./CategoryItem\";\nimport { CategoryObj } from \"../model/DomainModels\";\nimport OrderDayShopHeader from \"../components/OrderDayShopHeader\";\nimport ShopHeader from \"../components/ShopHeader\";\nimport { CartState } from \"../services/FirebaseIniti\";\n\nconst ShopMain: React.FC = () => {\n  console.log(\"entering market\");\n  const [showModal, setShowModal] = useState(false);\n  const Categories: CategoryObj[] = [];\n  const CartBadge: React.FC<CartState> = ({ firebase, cart }) => {\n    const cartSize = cart.cartItemList.length;\n    if (cartSize > 0) {\n      return <IonBadge color=\"danger\">{cart.cartItemList.length}</IonBadge>;\n    } else {\n      return <div></div>;\n    }\n  };\n\n  function mapStateToProps(state: CartState) {\n    const { firebase, cart, shop, address } = state;\n    return { firebase, cart, shop, address };\n  }\n  const CartCounter = connect(mapStateToProps)(CartBadge);\n  const ShopHeaderWithShop = connect(mapStateToProps)(ShopHeader);\n\n\n  var index = 0;\n  for (var x in data) {\n    // console.log(\"how many category \" + index + \" : \" + x);\n    index++;\n    const obj: CategoryObj = {\n      id: index,\n      categoryName: x.toString(),\n      market: \"Hi Fresh\",\n      imageUrl: \"./assets/img/veg-stock2.jpg\",\n      key: index\n    };\n    Categories.push(obj);\n  }\n\n  // mItems.json().\n  return (\n    <IonPage>\n      <IonToolbar>\n        <IonButtons slot=\"end\">\n          <IonButton onClick={() => setShowModal(true)} slot=\"start\">\n            <IonIcon size=\"large\" slot=\"icon-only\" icon={basket}></IonIcon>\n            <CartCounter />\n          </IonButton>\n        </IonButtons>\n      </IonToolbar>\n      <OrderDayShopHeader />\n      <IonContent fullscreen>\n        <ShopHeaderWithShop\n        />\n        <IonGrid>\n          <IonRow>\n            {Categories.map(obj => {\n              return (\n                <IonCol key={obj.id}>\n                  <CategoryItem market_id=\"\" category={obj} />\n                </IonCol>\n              );\n            })}\n          </IonRow>\n        </IonGrid>\n        <IonItem hidden={showModal}>\n          <Cart modal={showModal} closehandler={() => setShowModal(false)} />\n        </IonItem>\n      </IonContent>\n    </IonPage>\n  );\n};\n\nexport default ShopMain;\n","import React, { useState } from \"react\";\nimport { CartWithQty, RootState, Invoice, CartItem } from \"../model/DomainModels\";\nimport { ConvertCartWithQty } from \"../services/CartService\";\nimport {\n  IonPage,\n  IonHeader,\n  IonContent,\n  IonGrid,\n  IonRow,\n  IonCol,\n  IonLabel,\n  IonItem,\n  IonToolbar,\n  IonButtons,\n  IonButton,\n  IonIcon,\n  IonFooter,\n  IonCard,\n  IonCardContent,\n} from \"@ionic/react\";\nimport { CartState } from \"../services/FirebaseIniti\";\nimport { connect, useSelector } from \"react-redux\";\nimport { closeOutline } from \"ionicons/icons\";\nimport { useHistory, useParams } from \"react-router-dom\";\nimport { useFirebase, useFirestoreConnect, FirestoreReducer } from \"react-redux-firebase\";\n\n\nconst OrderComplete: React.FC<CartState> = ({ shop, cart }) => {\n  const firebase = useFirebase();\n\n  const cartListWithQty: CartWithQty[] = ConvertCartWithQty(cart);\n  const { invoice_id } = useParams<{ invoice_id: string }>();\n  // const [ invoice,setInvoice ] = useState<Invoice>({} as Invoice);\n  const cartListArray: Array<CartWithQty> = [];\n  const cartItems: Array<CartItem> = [];\n  let invoice: Invoice = {} as Invoice;\n  let history = useHistory();\n  // for (var cartlistitemqty in cartListWithQty) {\n  //   cartListArray.push(cartListWithQty[cartlistitemqty]);\n  //   console.log(cartlistitemqty);\n  // }\n  function closehandler() {\n    history.push(\"/\");\n  }\n\n  useFirestoreConnect([{ collection: \"Invoices\", doc: invoice_id, storeAs: \"Invoice\" }]);\n\n  const invoiceStore = useSelector<RootState>(\n    state => state.firestore\n  ) as FirestoreReducer.Reducer;\n\n\n  // setInvoice(invoice.ordered.Invoice[0])\n  console.log(\"INVOICE: \" + invoice_id);\n  // console.log(JSON.stringify(invoice.ordered.Invoice[0]));\n\n  if (invoiceStore.ordered.Invoice && invoiceStore.ordered.Invoice.length > 0) {\n    // setInvoice(invoiceStore.ordered.Invoice[0])\n    invoice = invoiceStore.ordered.Invoice[0]\n    invoice.cart_items.forEach(element => {\n      let ele = { ...element, qty: 1, img_url: \"\" }\n      // ele.map((updateItem:CartItem) => ({\n      //   ...updateItem,\n      //   qty: 1       \n      // }));\n      // let ele:CartItem = {} as CartItem\n      // ele.name = element.name;\n      // ele.qty = 1;\n      // ele.unit_price = element.unit_price;\n      // ele.img_url = element.img_url;\n      // ele.unit = element.unit;\n      // ele.id = element.id;\n\n      let item = cartItems.filter(function (item: CartItem) {\n        return item.id == element.id;\n      })\n      if (item.length > 0) {\n        let existedItem = item[0];\n        existedItem.qty = existedItem.qty + 1;\n        // let newList = cartItems;\n        // cartItems = [...newList,existedItem]\n      } else {\n        cartItems.push(ele);\n      }\n    });\n    console.log(\"ITEMS:\" + JSON.stringify(cartItems));\n\n    // for (var item in invoice.cart_items) {\n\n    //   cartItems.push(invoice.cart_items[item]);\n    //   console.log(cartItems);\n    // }\n  }\n\n\n  return (\n    <IonPage>\n      <IonHeader>\n        <IonToolbar>\n          <IonButtons slot=\"end\">\n            <IonButton onClick={closehandler}>\n              <IonIcon\n                size=\"large\"\n                slot=\"icon-only\"\n                icon={closeOutline}\n              ></IonIcon>\n            </IonButton>\n          </IonButtons>\n          <IonButtons slot=\"start\"></IonButtons>\n        </IonToolbar>\n      </IonHeader>\n\n      <IonContent>\n        <IonItem className=\"order_cutoff\" lines=\"none\">\n          <p>\n            {invoice.cut_off_terms}\n          </p>\n        </IonItem>\n        <IonItem className=\"order_cutoff\" lines=\"none\">\n          {/* {invoice.cut_off_terms} */}\n          <IonLabel>\n            <b>{\"INV \" + invoice_id}</b>\n          </IonLabel>\n        </IonItem>\n        <IonItem className=\"order_completed\" lines=\"none\">\n          <IonLabel>\n            <b>Order Completed</b>\n          </IonLabel>\n        </IonItem>\n        <IonItem className=\"order_completed\">\n          <p>\n            We are processing your order at the moment. You will receieve the\n            order confirmation from us shortly.\n          </p>\n        </IonItem>\n        {/* <IonCard className=\"complete_order_card\">\n          <IonCardContent> */}\n        <IonGrid >\n          <IonRow>\n            <IonCol size=\"5\" ><IonItem lines=\"none\"></IonItem></IonCol>\n            <IonCol size=\"3\" ><IonItem text-center lines=\"none\">Qty</IonItem></IonCol>\n            <IonCol size=\"3\" text-center><IonItem text-center lines=\"none\">Total</IonItem></IonCol>\n          </IonRow>\n          {/* {cartListArray.map(cartWithQty => {\n            return (\n              <IonRow>\n                <IonCol size=\"4\">\n                  <IonItem lines=\"none\">{cartWithQty.item.name}</IonItem>\n                </IonCol>\n                <IonCol size=\"3\">{cartWithQty.count}</IonCol>\n                <IonCol size=\"2\">\n                  <IonItem lines=\"none\">${cartWithQty.item.unit_price}</IonItem>\n                </IonCol>\n              </IonRow>\n            );\n          })} */}\n          {cartItems.map(item => {\n            return (\n              <IonRow>\n                <IonCol size=\"5\" >\n                  <IonItem lines=\"none\">{item.name}</IonItem>\n                </IonCol>\n                <IonCol size=\"3\" ><IonItem lines=\"none\">{item.qty}</IonItem></IonCol>\n                <IonCol size=\"3\" >\n                  <IonItem lines=\"none\">${item.unit_price}</IonItem>\n                </IonCol>\n              </IonRow>\n            );\n          })}\n        </IonGrid>\n        {/* </IonCardContent>\n        </IonCard> */}\n        <IonItem></IonItem>\n        <IonItem className=\"total_cart\" lines=\"none\">Total incl GST ${invoice.total_amount}</IonItem>\n      </IonContent>\n      <IonFooter>\n        <IonButton expand=\"full\" onClick={() => history.push(\"/\")}>Continue Shopping</IonButton>\n      </IonFooter>\n    </IonPage>\n  );\n};\n\nfunction mapStateToProps(state: CartState) {\n  const { firebase, cart, shop } = state;\n  return { firebase, cart, shop };\n}\n\nexport default connect(mapStateToProps)(OrderComplete);\n","import { CartWithQty, CartStateType } from \"../model/DomainModels\";\n\nexport function ConvertCartWithQty(cart: CartStateType) {\n  const cartListWithQty: CartWithQty[] = [];\n\n  console.log(cart.cartItemList);\n  cart.cartItemList.map(cartItem => {\n    if (cartItem) {\n      if (cartListWithQty[cartItem.id as any] == null) {\n        cartListWithQty[cartItem.id as any] = {\n          key: cartItem.id,\n          item: cartItem,\n          count: 0\n        };\n      }\n      if (cartListWithQty[cartItem.id as any].count === 0) {\n        cartListWithQty[cartItem.id as any].count = 1;\n      } else {\n        cartListWithQty[cartItem.id as any].count++;\n      }\n    }\n    return {};\n  });\n  console.log(cartListWithQty);\n  return cartListWithQty;\n}\n","import React, { useEffect, useState } from \"react\";\nimport {\n  IonPage,\n  IonContent,\n  IonCard,\n  IonCardContent,\n  IonButton,\n  IonLabel,\n  IonIcon,\n  IonItem,\n  IonHeader,\n  IonToolbar,\n  IonImg,\n  getPlatforms,\n  IonLoading\n} from \"@ionic/react\";\nimport { logoFacebook, logoGoogle } from \"ionicons/icons\";\nimport { useFirebase, isLoaded, isEmpty } from \"react-redux-firebase\";\nimport { useSelector } from \"react-redux\";\nimport { RootState } from \"../model/DomainModels\";\nimport { useHistory } from \"react-router-dom\";\nimport { cfaSignIn, mapUserToUserInfo } from \"capacitor-firebase-auth\";\nimport { UserInfo } from \"firebase/app\";\nimport { isPlatform } from \"@ionic/core\";\n\nconst Login: React.FC = () => {\n  const firebase = useFirebase();\n  const auth = useSelector<RootState>(state => state.firebase.auth);\n  const history = useHistory();\n  const db = firebase.firestore();\n  const [showLoading, setShowLoading] = useState(false);\n\n  firebase.auth().onAuthStateChanged(function (user) {\n    console.log(\"Login State changes\");\n    console.log(user);\n    if (isLoaded(auth) && !isEmpty(auth)) {\n      console.log(\"User Logged in\");\n      writeUserData(auth);\n    }\n  });\n\n  function writeUserData(auth1: any) {\n    let auth2 = JSON.parse(JSON.stringify(auth1));\n    db.collection(\"Users\")\n      .doc(auth2.uid)\n      .set({\n        providerId: auth2.providerData[0].providerId,\n        display_name: auth2.displayName, //displayName\n        payment_detail: \"\", //\n        contact_mobile: auth2.phoneNumber,\n        address: {},\n        photo_url: auth2.photoURL, //photoURL we get from firebase.auth() when sign in completed\n        user_id: auth2.uid, // uid  we get from firebase.auth() when sign in completed\n        email: auth2.email\n      });\n  }\n\n  useEffect(() => {\n    if (isLoaded(auth) && !isEmpty(auth)) {\n      console.log(\"User Logged in\");\n      history.push(\"/\");\n    }\n  }, [auth, history]);\n\n  async function loginWithGoogle() {\n    setShowLoading(true);\n    // await Plugins.GoogleAuth.signOut();\n    console.log(\n      \"platfprms \" + getPlatforms() + \" platform is\" + isPlatform(\"ios\")\n    );\n    if (!isPlatform(\"ios\") || isPlatform(\"mobileweb\")) {\n      console.log(\"Google Web login start\");\n      return firebase\n        .login({ provider: \"google\", type: \"popup\" })\n        .then(data => {\n          console.log(data);\n          history.push(\"/\");\n          setShowLoading(false);\n        })\n        .catch(data => {\n          console.log(\"Something Wrong with Google login. Please try again later\");\n          console.log(data);\n          history.push(\"/\");\n          setShowLoading(false);\n\n        });\n    } else {\n      return cfaSignIn(\"google.com\")\n        .pipe(mapUserToUserInfo())\n        .subscribe((user: UserInfo) => {\n          setShowLoading(false);\n          console.log(user.displayName);\n        });\n    }\n  }\n\n  function loginWithFacebook() {\n    setShowLoading(true);\n\n    console.log(\n      \"platfprms \" + getPlatforms() + \" platform is\" + isPlatform(\"ios\")\n    );\n    if (!isPlatform(\"ios\") || isPlatform(\"mobileweb\")) {\n      console.log(\"Facebook Web login start\");\n      return firebase\n        .login({ provider: \"facebook\", type: \"popup\" })\n        .then(data => {\n          console.log(data);\n          history.push(\"/\");\n          setShowLoading(false);\n        })\n        .catch(data => {\n          console.log(\"Something Wrong with Facebook login. Please try again later\");\n          console.log(data);\n          history.push(\"/\");\n          setShowLoading(false);\n\n        });\n    } else {\n      return cfaSignIn(\"facebook.com\")\n        .pipe(mapUserToUserInfo())\n        .subscribe((user: UserInfo) => {\n          console.log(user.displayName);\n          setShowLoading(false);\n        });\n    }\n  }\n\n  return (\n    <IonPage>\n      <IonHeader>\n        <IonToolbar></IonToolbar>\n        <IonImg class=\"startmall_header \" src=\"/assets/icon/1x/logo2.png\" />\n      </IonHeader>\n      <IonIcon\n        className=\"login_icon\"\n        size=\"small\"\n        src=\"assets/icon/logo_small.svg\"\n      />\n\n      <IonContent >\n        <IonCard className=\"login_card\">\n          <IonCardContent>\n            <IonButton\n              color=\"facebook\"\n              fill=\"solid\"\n              className=\"facebook_button\"\n              onClick={loginWithFacebook}\n            >\n              <IonIcon icon={logoFacebook}></IonIcon>\n              Sign up / Sign in with Facebook\n            </IonButton>\n            <IonButton\n              color=\"google\"\n              fill=\"solid\"\n              className=\"google_button\"\n              onClick={loginWithGoogle}\n            >\n              <IonIcon icon={logoGoogle}></IonIcon>Sign up / Sign in with Google\n            </IonButton>\n            <IonItem lines=\"none\">\n              <IonLabel>- or -</IonLabel>\n            </IonItem>\n            <IonButton\n              color=\"google\"\n              fill=\"solid\"\n              shape=\"round\"\n              className=\"wechat_button\"\n            >\n              WeChat\n            </IonButton>\n            <div>\n              <IonLabel>\n                By signing up, you agree to StartMall's <u>Terms of Use</u> and{\" \"}\n                <u>Privacy Policy</u>.\n              </IonLabel>\n            </div>\n          </IonCardContent>\n        </IonCard>\n        <IonLoading\n          isOpen={showLoading}\n          onDidDismiss={() => setShowLoading(false)}\n          message={\"Please wait...\"}\n          duration={5000}\n        />\n      </IonContent>\n    </IonPage>\n  );\n};\n\n\nexport default Login;\n","import React from \"react\";\nimport { Stripe } from \"@ionic-native/stripe\";\n\nimport { IonPage } from \"@ionic/react\";\nimport { constructSharp } from \"ionicons/icons\";\nimport { PaymentRequestButtonElement } from \"@stripe/react-stripe-js\";\n\nconst StripeComponent: React.FC = () => {\n  const stripeKey = \"pk_test_YC0gcyGppNgDEzsD5FxBzPXJ00nUQJqCvw\";\n  Stripe.setPublishableKey(stripeKey).then(e => console.log(e));\n  var cardDetails = {\n    number: \"4242424242424242\",\n    expMonth: 12,\n    expYear: 2020,\n    cvc: \"220\"\n  };\n  Stripe.createCardToken(cardDetails)\n    .then(e => {\n      console.log(e.id);\n      // in ios native, we will make one time payment here.\n    })\n    .catch(error => {\n      console.log(error);\n    });\n\n  return (\n    <IonPage>\n      <PaymentRequestButtonElement />\n    </IonPage>\n  );\n};\n\nexport default StripeComponent;\n","import React, { useState } from \"react\";\nimport {\n  IonCard,\n  IonCardContent,\n  IonButton,\n  IonIcon,\n  IonRow, IonCol,\n  IonItem,\n  IonLabel\n} from \"@ionic/react\";\nimport { add, heart, heartOutline } from \"ionicons/icons\";\nimport state from \"../reducers/Address\";\nimport { useDispatch } from \"react-redux\";\nimport { addCartAction } from \"../reducers/CartAction\";\nimport { ItemObj } from \"../model/DomainModels\";\nimport { ShopItemProps } from \"../model/ComponentProps\";\nimport { FirestoreIonImg } from \"../services/FirebaseStorage\";\n\nconst ShopItem: React.FC<ShopItemProps> = ({ item }) => {\n  const [favorites, setFavorites] = useState(heartOutline);\n  const dispatch = useDispatch();\n\n  function addFavorites() {\n    if (favorites === heartOutline) {\n      setFavorites(heart);\n    } else {\n      setFavorites(heartOutline);\n    }\n  }\n\n  function addCart(item: ItemObj) {\n    // const cartItem: CartItem = {\n    //   market: item.market,\n    //   name: item.itemName,\n    //   desc: item.itemDesc,\n    //   cost: item.itemCost,\n    //   item_key: 1,\n    //   cart_key: 0,\n    //   qty: 1\n    // };\n\n    dispatch(addCartAction(item));\n\n    console.log(\"add item to state\");\n    console.log(state);\n    //setFavorites(heart);\n  }\n\n  return (\n    <IonCard>\n      <IonCardContent style={{ padding: 10 }}>\n        <IonRow>\n          <IonCol size=\"4\">\n            <FirestoreIonImg src={item.img_url as string} />\n          </IonCol>\n          <IonCol size=\"7.8\">\n            <IonLabel >\n              <p>{item.name}</p>\n              <br />\n              <p className=\"currency\">\n                $ {item.unit_price} {item.unit}\n              </p>\n            </IonLabel>\n            <br />\n            <IonItem lines=\"none\" style={{ float: \"right\" }} >\n              <IonButton\n                color=\"tertiary\"\n                fill=\"outline\"\n                size=\"small\"\n                onClick={() => addCart(item)}\n              >\n                <IonIcon slot=\"start\" icon={add} />\n                Add to Cart\n                </IonButton>\n              <IonButton\n                color=\"secondary\"\n                fill=\"clear\"\n                size=\"small\"\n                onClick={() => addFavorites()}\n              >\n                <IonIcon icon={favorites} />\n              </IonButton>\n            </IonItem>\n            <IonItem lines=\"none\" style={{ float: \"right\" }} className=\"shop_item_min_order\" >\n              <IonLabel>Minimum order: Nil</IonLabel>\n            </IonItem>\n          </IonCol>\n        </IonRow>\n      </IonCardContent>\n    </IonCard>\n  );\n};\n\nexport default ShopItem;\n","import React from \"react\";\nimport { withRouter, useHistory } from \"react-router-dom\";\nimport { IonButton, IonIcon } from \"@ionic/react\";\nimport { chevronBackOutline } from \"ionicons/icons\";\n\nconst GoBack = () => {\n  var history = useHistory();\n  return (\n    <IonButton fill=\"clear\" class=\"back_button\" onClick={() => history.goBack()}>\n      <IonIcon\n        size=\"small\"\n        slot=\"icon-only\"\n        icon={chevronBackOutline}\n      ></IonIcon>\n    </IonButton>\n  );\n};\n\nexport default withRouter(GoBack);\n","import {\n  IonHeader,\n  IonToolbar,\n  IonButtons,\n  IonButton,\n  IonIcon,\n  IonTitle,\n  IonMenuToggle\n} from \"@ionic/react\";\n\nimport React from \"react\";\n\nimport { basket } from \"ionicons/icons\";\n\nimport GoBack from \"./GoBack\";\nimport { Markets } from \"../model/DomainModels\";\n\ninterface MarketHeaderProps {\n  setShowModal: any;\n  shop: Markets;\n  CartCounter: any;\n}\n\nconst MarketHeader: React.FC<MarketHeaderProps> = ({\n  setShowModal,\n  shop,\n  CartCounter\n}) => {\n  return (\n    <IonHeader>\n      <IonToolbar color=\"secondary\">\n        <IonButtons slot=\"end\">\n          <IonButton onClick={() => setShowModal(true)} slot=\"start\">\n            <IonIcon size=\"large\" slot=\"icon-only\" icon={basket}></IonIcon>\n            <CartCounter />\n          </IonButton>\n          <IonMenuToggle>\n            <IonButton>\n\n            <IonIcon slot=\"start\" src=\"assets/icon/logo_small.svg\"></IonIcon>\n            </IonButton>\n          </IonMenuToggle>\n        </IonButtons>\n        <IonButtons slot=\"start\">\n          <GoBack />\n        </IonButtons>\n        <IonTitle class=\"shop_header_condition\" size=\"large\">\n          <p>{shop.cut_off_terms}</p>\n        </IonTitle>\n      </IonToolbar>\n    </IonHeader>\n  );\n};\n\nexport default MarketHeader;\n","import {\n  IonContent,\n  IonPage,\n  IonGrid,\n  IonRow,\n  IonCol,\n  IonBadge} from \"@ionic/react\";\nimport React, { useState } from \"react\";\nimport \"./Market.css\";\nimport ShopItem from \"./ShopItem\";\nimport Cart from \"./Cart\";\nimport { connect, useSelector } from \"react-redux\";\nimport { MarketItemsProps } from \"../model/ComponentProps\";\nimport ShopHeader from \"../components/ShopHeader\";\nimport { useParams } from \"react-router\";\nimport { useFirestoreConnect, FirestoreReducer } from \"react-redux-firebase\";\nimport { RootState, Markets } from \"../model/DomainModels\";\nimport { CartState } from \"../services/FirebaseIniti\";\nimport MarketHeader from \"../components/MarketHeader\";\n\n// interface ItemJson {\n//   产品: string;\n//   售出单价: number;\n//   规格: string;\n\n//   [key: string]: string | number | null;\n// }\n\nconst MarketItems: React.FC<MarketItemsProps> = () => {\n  console.log(\"entering MarketItems\");\n  const { market_id } = useParams<{ market_id: string }>();\n  const { category_id } = useParams<{ category_id: string }>();\n  var shop = {} as Markets;\n  // const { categoryName } = useParams<{ categoryName: string }>();\n  const [showModal, setShowModal] = useState(false);\n\n  useFirestoreConnect([\n    { collection: \"Markets\", doc: market_id, storeAs: \"Market\" },\n    {\n      collection: \"Markets\",\n      doc: market_id,\n      subcollections: [\n        {\n          collection: \"Categories\",\n          doc: category_id,\n          subcollections: [{ collection: \"Items\" }]\n        }\n      ],\n      storeAs: \"ItemList\"\n    }\n  ]);\n  const dataStore = useSelector<RootState>(\n    state => state.firestore\n  ) as FirestoreReducer.Reducer;\n\n  if (dataStore.ordered.Market && dataStore.ordered.Market.length > 0) {\n    dataStore.ordered.Market.map(tmarket => {\n      console.log(tmarket.name);\n      shop = tmarket;\n      return shop;\n    });\n  }\n\n  const CartBadge: React.FC<CartState> = ({ cart }) => {\n    const cartSize = cart.cartItemList.length;\n    if (cartSize > 0) {\n      return <IonBadge color=\"danger\">{cart.cartItemList.length}</IonBadge>;\n    } else {\n      return <div></div>;\n    }\n  };\n\n  function mapStateToProps(state: CartState) {\n    const { firebase, cart, shop } = state;\n    return { firebase, cart, shop };\n  }\n  const CartCounter = connect(mapStateToProps)(CartBadge);\n  const ShopHeaderWithShop = connect(mapStateToProps)(ShopHeader);\n\n  // data.禽蛋类.map(item => {\n  //   var jsonitem = item as ItemJson;\n  //   const itemobj: ItemObj = {\n  //     market: \"Hi Fresh\",\n  //     itemName: jsonitem.产品,\n  //     itemDesc: jsonitem.规格,\n  //     itemCost: jsonitem.售出单价\n  //   };\n  //   Items.push(itemobj);\n  //   return Items;\n  // });\n\n  return (\n    <IonPage>\n      <MarketHeader setShowModal={setShowModal} shop={shop} CartCounter={CartCounter}/>\n      <IonContent className=\"shope_item_listing\" fullscreen>\n        <ShopHeaderWithShop\n        />\n        <IonGrid>\n          <IonRow>\n            {dataStore.ordered.ItemList &&\n            dataStore.ordered.ItemList.length > 0 ? (\n              dataStore.ordered.ItemList.map(obj => {\n                return (\n                  <IonCol key={obj.id}>\n                    <ShopItem item={obj} />\n                  </IonCol>\n                );\n              })\n            ) : (\n              <p></p>\n            )}\n          </IonRow>\n        </IonGrid>\n        <Cart modal={showModal} closehandler={() => setShowModal(false)} />\n      </IonContent>\n    </IonPage>\n  );\n};\n\nexport default MarketItems;\n","import React from \"react\";\nimport { ShopSelectionListProps } from \"../model/ComponentProps\";\nimport {\n  IonList,\n  IonCard,\n  IonImg,\n  IonItem,\n  IonText\n} from \"@ionic/react\";\n\nconst ShopSelectionList: React.FC<ShopSelectionListProps> = ({\n  shops,\n  handleShopClick\n}) => {\n  console.log(shops);\n  return (\n    <IonList className=\"shop_selection\">\n      {shops.map(obj => {\n        return (\n          <IonCard\n            class=\"shop_card\"\n            onClick={() => {\n              handleShopClick(obj);\n            }}\n          >\n            <IonImg src={obj.img_url as string} alt={obj.name}></IonImg>\n            <IonItem lines=\"none\">\n              <IonText>Provide: </IonText>\n            </IonItem>\n            <IonItem lines=\"none\">\n              <IonText>{obj.service_offering}</IonText>\n            </IonItem>\n            <IonItem lines=\"none\">\n              <IonText>Terms: </IonText>\n            </IonItem>\n            <IonItem lines=\"none\">\n              <IonText>{obj.cut_off_terms}</IonText>\n            </IonItem>\n          </IonCard>\n        );\n      })}\n    </IonList>\n  );\n};\n\nexport default ShopSelectionList;\n","import {\n  IonButtons,\n  IonContent,\n  IonHeader,\n  IonMenuButton,\n  IonPage,\n  IonToolbar,\n  IonImg,\n  IonText,\n  IonLabel,\n  IonItem,\n} from \"@ionic/react\";\nimport React from \"react\";\nimport \"./Dashboard.css\";\nimport { useHistory } from \"react-router\";\nimport { useParams } from \"react-router-dom\";\nimport { useFirestoreConnect, FirestoreReducer } from \"react-redux-firebase\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport ShopSelectionList from \"../containers/ShopSelectionList\";\nimport { RootState, Markets } from \"../model/DomainModels\";\nimport { setCurrentShop } from \"../reducers/ShopAction\";\n\nconst ShopSelection: React.FC = () => {\n  console.log(\"entering Dashboard\");\n  const history = useHistory();\n  const dispatch = useDispatch();\n  const { postcode } = useParams<{ postcode: string }>();\n  const marketList: Array<Markets> = [];\n\n  function handleShopClick(shop: any) {\n    dispatch(setCurrentShop({ shop: shop }));\n    history.push(\"/tabs/market/\" + shop.id);\n  }\n\n  useFirestoreConnect([{ collection: \"Markets\" }]);\n\n  const markets = useSelector<RootState>(\n    state => state.firestore\n  ) as FirestoreReducer.Reducer;\n\n  if (markets.ordered.Markets && markets.ordered.Markets.length > 0) {\n    markets.ordered.Markets.forEach(market => {\n      if (postcode) {\n        if (market.support_postcodes && market.support_postcodes.length > 0) {\n          if (market.support_postcodes.includes(postcode)) {\n            marketList.push(market)\n          }\n        }\n      } else {\n        // marketList.push(market)\n      }\n    });\n\n  }\n\n  return (\n    <IonPage>\n      <IonHeader>\n        <IonToolbar>\n          <IonButtons slot=\"end\">\n            <IonMenuButton />\n          </IonButtons>\n        </IonToolbar>\n        <IonImg class=\"startmall_header \" src=\"/assets/icon/1x/logo2.png\" />\n      </IonHeader>\n      <IonText slot=\"right\">SHOP CAN DELIVERY TO YOUR AREA</IonText>\n      <IonContent fullscreen>\n        {marketList.length > 0 ? (\n          <ShopSelectionList\n            handleShopClick={handleShopClick}\n            shops={marketList}\n          />\n        ) : (\n            <p className=\"no_data_found\">No Data Found</p> \n          )}\n      </IonContent>\n    </IonPage>\n  );\n};\n\nexport default ShopSelection;\n","import { SET_CURRENT_SHOP } from \"./Cart\";\nimport { ShopStateType } from \"../model/DomainModels\";\n\nexport function setCurrentShop(shop: ShopStateType) {\n  return {\n    type: SET_CURRENT_SHOP,\n    payload: shop\n  };\n}\n\n","import {\n  IonContent,\n  IonPage,\n  IonGrid,\n  IonRow,\n  IonCol,\n  IonBadge} from \"@ionic/react\";\nimport React, { useState } from \"react\";\nimport \"./Market.css\";\nimport Cart from \"./Cart\";\nimport { connect, useSelector } from \"react-redux\";\nimport CategoryItem from \"./CategoryItem\";\nimport ShopHeader from \"../components/ShopHeader\";\nimport { useFirestoreConnect, FirestoreReducer } from \"react-redux-firebase\";\nimport { useParams } from \"react-router\";\nimport { RootState, Markets } from \"../model/DomainModels\";\nimport { CartState } from \"../services/FirebaseIniti\";\nimport MarketHeader from \"../components/MarketHeader\";\n\nconst Market: React.FC = () => {\n  const profile = useSelector<RootState>(state => state.firebase.profile)\nconsole.log (\"User Profile:\");\n  console.log (profile);\n  const { market_id } = useParams<{ market_id: string }>();\n  var shop = {} as Markets;\n  const [showModal, setShowModal] = useState(false);\n\n  const CartBadge: React.FC<CartState> = ({ cart }) => {\n    const cartSize = cart.cartItemList.length;\n    if (cartSize > 0) {\n      return <IonBadge color=\"danger\">{cart.cartItemList.length}</IonBadge>;\n    } else {\n      return <div></div>;\n    }\n  };\n\n  useFirestoreConnect([\n    { collection: \"Markets\", doc: market_id, storeAs: \"Market\" },\n    {\n      collection: \"Markets\",\n      doc: market_id,\n      subcollections: [\n        {\n          collection: \"Categories\"\n        }\n      ],\n      storeAs: \"Categories\"\n    }\n  ]);\n\n  const stateStore = useSelector<RootState>(\n    state => state.firestore\n  ) as FirestoreReducer.Reducer;\n\n  if (stateStore.ordered.Market && stateStore.ordered.Market.length > 0) {\n    stateStore.ordered.Market.map(tmarket => {\n      console.log(tmarket.name);\n      shop = tmarket;\n      return shop;\n    });\n  }\n\n  function mapStateToProps(state: CartState) {\n    const { firebase, cart, shop } = state;\n    return { firebase, cart, shop };\n  }\n  const CartCounter = connect(mapStateToProps)(CartBadge);\n  const ShopHeaderWithShop = connect(mapStateToProps)(ShopHeader);\n\n  return (\n    <IonPage>\n      <MarketHeader setShowModal={setShowModal} shop={shop} CartCounter={CartCounter}/>\n\n      <IonContent className=\"category\" fullscreen>\n        <ShopHeaderWithShop\n        />\n        <IonGrid>\n          <IonRow>\n            {stateStore.ordered.Categories &&\n            stateStore.ordered.Categories.length > 0 ? (\n              stateStore.ordered.Categories.map(obj => {\n                return (\n                  <IonCol key={obj.id}>\n                    <CategoryItem market_id={market_id} category={obj} />\n                  </IonCol>\n                );\n              })\n            ) : (\n              <p></p>\n            )}\n          </IonRow>\n        </IonGrid>\n        <Cart modal={showModal} closehandler={() => setShowModal(false)} />\n      </IonContent>\n    </IonPage>\n  );\n};\n\nexport default Market;\n","import React, { useEffect, useState } from \"react\";\nimport {\n  IonPage,\n  IonContent,\n  IonCard,\n  IonCardContent,\n  IonButton,\n  IonButtons,\n  IonLabel,\n  IonIcon,\n  IonItem,\n  IonHeader,\n  IonToolbar,\n  IonImg,\n  getPlatforms,\n  IonLoading,\n} from \"@ionic/react\";\nimport { logoFacebook, logoGoogle } from \"ionicons/icons\";\nimport { useFirebase, isLoaded, isEmpty } from \"react-redux-firebase\";\nimport { useSelector } from \"react-redux\";\nimport { RootState } from \"../model/DomainModels\";\nimport { useHistory } from \"react-router-dom\";\nimport { cfaSignIn, mapUserToUserInfo } from \"capacitor-firebase-auth\";\nimport { UserInfo } from \"firebase/app\";\nimport { isPlatform } from \"@ionic/core\";\nimport { closeOutline } from \"ionicons/icons\";\nimport { PaymentRequestButtonElement, useStripe, CardElement, useElements } from '@stripe/react-stripe-js';\n\n\nconst ApplePay: React.FC = () => {\n\n  // interface PaymentRequest {\n    \n  // }\n\n  const [showLoading, setShowLoading] = useState(false);\n  let history = useHistory();\n  const stripe = useStripe();\n  const elements = useElements();\n \n  const [paymentRequest, setPaymentRequest] = useState(null);\n\n  const closehandler = async () => {\n    history.goBack();\n  };\n\n  useEffect(() => {\n    if (stripe) {\n      \n      const pr = stripe?.paymentRequest({\n        country: 'US',\n        currency: 'usd',\n        total: {\n          label: 'Demo total',\n          amount: 1099,\n        },\n        requestPayerName: true,\n        requestPayerEmail: true,\n      });\n      // Check the availability of the Payment Request API.\n      pr?.canMakePayment().then(result => {\n        if (result && pr) {\n          // setPaymentRequest(pr);\n        }\n      });\n    }\n  }, [stripe]);\n\n  \n\n\n  const payWithStripe = async () => {\n    // Block native form submission.\n    // event.preventDefault();\n\n    if (!stripe || !elements) {\n      // Stripe.js has not loaded yet. Make sure to disable\n      // form submission until Stripe.js has loaded.\n      return;\n    }\n\n\n    // Get a reference to a mounted CardElement. Elements knows how\n    // to find your CardElement because there can only ever be one of\n    // each type of element.\n    const cardElement = elements.getElement(CardElement);\n\n    // Use your card Element with other Stripe.js APIs\n\n    if (cardElement) {\n      const { error, paymentMethod } = await stripe.createPaymentMethod({\n        'type': 'card',\n        card: cardElement,\n      });\n\n\n      if (error) {\n        console.log('[error]', error);\n      } else {\n        console.log('[PaymentMethod]', JSON.stringify(paymentMethod));\n      }\n    } else {\n      console.log(\"Card Element is not available\")\n    }\n\n  }\n\n\n\n  return (\n    <IonPage>\n      <IonToolbar color=\"secondary\">\n        <IonButtons slot=\"end\">\n          <IonButton onClick={closehandler}>\n            <IonIcon\n              size=\"large\"\n              slot=\"icon-only\"\n              icon={closeOutline}\n            ></IonIcon>\n          </IonButton>\n        </IonButtons>\n      </IonToolbar>\n      <IonContent>\n        {/* {\n          paymentRequest && paymentRequest != null\n            ? <PaymentRequestButtonElement options={{paymentRequest}} />\n          :null\n        } */}\n        <form onSubmit={payWithStripe}>\n          \n          <CardElement />\n          <IonButton\n            color=\"google\"\n            fill=\"solid\"\n            shape=\"round\"\n            className=\"wechat_button\"\n            onClick={payWithStripe}\n          >\n            Apple Pay\n          </IonButton>\n        </form>\n        <IonLoading\n          isOpen={showLoading}\n          onDidDismiss={() => setShowLoading(false)}\n          message={\"Please wait...\"}\n          duration={5000}\n        />\n        <br></br>\n      </IonContent>\n    </IonPage>\n  );\n};\n\nexport default ApplePay;\n","import Menu from \"./components/Menu\";\nimport Page from \"./pages/Page\";\nimport React from \"react\";\nimport { IonApp, IonRouterOutlet, IonSplitPane } from \"@ionic/react\";\nimport { IonReactRouter } from \"@ionic/react-router\";\nimport { Redirect, Route } from \"react-router-dom\";\n\n/* Core CSS required for Ionic components to work properly */\nimport \"@ionic/react/css/core.css\";\n\n/* Basic CSS for apps built with Ionic */\nimport \"@ionic/react/css/normalize.css\";\nimport \"@ionic/react/css/structure.css\";\nimport \"@ionic/react/css/typography.css\";\n\n/* Optional CSS utils that can be commented out */\nimport \"@ionic/react/css/padding.css\";\nimport \"@ionic/react/css/float-elements.css\";\nimport \"@ionic/react/css/text-alignment.css\";\nimport \"@ionic/react/css/text-transformation.css\";\nimport \"@ionic/react/css/flex-utils.css\";\nimport \"@ionic/react/css/display.css\";\n/* Theme variables */\nimport \"./theme/variables.css\";\nimport MainTabs from \"./components/MainTabs\";\nimport Checkout from \"./pages/Checkout\";\nimport Dashboard from \"./pages/Dashboard\";\nimport ShopMain from \"./containers/ShopMain\";\nimport OrderComplete from \"./pages/OrderComplete\";\nimport Login from \"./pages/Login\";\nimport { Stripe } from \"@ionic-native/stripe\";\nimport StripeComponent from \"./services/Stripe\";\nimport MarketItems from \"./containers/MarketItems\";\nimport ShopSelection from \"./pages/ShopSelection\";\nimport Market from \"./containers/Market\";\nimport NonSupport from \"./pages/NonSupport\";\nimport ApplePay from './pages/ApplePay';\n\nconst App: React.FC = () => {\n  console.log(\"entering app\");\n  // function MobileCheck() {\n  //   let check = false;\n  //   (function(a) {\n  //     if (\n  //       /(android|bb\\d+|meego).+mobile|avantgo|bada\\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(\n  //         a\n  //       ) ||\n  //       /1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\\-(n|u)|c55\\/|capi|ccwa|cdm\\-|cell|chtm|cldc|cmd\\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\\-s|devi|dica|dmob|do(c|p)o|ds(12|\\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\\-|_)|g1 u|g560|gene|gf\\-5|g\\-mo|go(\\.w|od)|gr(ad|un)|haie|hcit|hd\\-(m|p|t)|hei\\-|hi(pt|ta)|hp( i|ip)|hs\\-c|ht(c(\\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\\-(20|go|ma)|i230|iac( |\\-|\\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\\/)|klon|kpt |kwc\\-|kyo(c|k)|le(no|xi)|lg( g|\\/(k|l|u)|50|54|\\-[a-w])|libw|lynx|m1\\-w|m3ga|m50\\/|ma(te|ui|xo)|mc(01|21|ca)|m\\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\\-2|po(ck|rt|se)|prox|psio|pt\\-g|qa\\-a|qc(07|12|21|32|60|\\-[2-7]|i\\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\\-|oo|p\\-)|sdk\\/|se(c(\\-|0|1)|47|mc|nd|ri)|sgh\\-|shar|sie(\\-|m)|sk\\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\\-|v\\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\\-|tdg\\-|tel(i|m)|tim\\-|t\\-mo|to(pl|sh)|ts(70|m\\-|m3|m5)|tx\\-9|up(\\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\\-|your|zeto|zte\\-/i.test(\n  //         a.substr(0, 4)\n  //       )\n  //     )\n  //       check = true;\n  //   })(navigator.userAgent || navigator.vendor);\n  //   return check;\n  // }\n  // if (MobileCheck()) {\n  //   return (\n  //     <IonApp>\n  //       <IonReactRouter>\n  //         <Route component={NonSupport} />\n  //       </IonReactRouter>\n  //     </IonApp>\n  //   );\n  // } else {\n  // return (\n  //   <IonApp>\n  //     <IonReactRouter>\n  //       <IonSplitPane contentId=\"main\">\n  //         <Menu />\n  //         <IonRouterOutlet id=\"main\">\n  //           <Route path=\"/page/checkout\" component={Checkout} exact={true} />\n  //           <Route path=\"/tabs\" component={MainTabs} exact />\n  //           <Route path=\"/landing\" component={Dashboard} exact />\n  //           {/* <ProtectedRoute {...defaultProtectedRouteProps}  path=\"/shop_selections\" component={ShopSelection} exact /> */}\n  //           <Route path=\"/login\" component={Login} exact />\n  //           <Route path=\"/orders\" component={OrderComplete} exact />\n  //           <Route path=\"/shop/:name/categories\" component={ShopMain} exact />\n  //           <Route path=\"/page/:name\" component={Page} exact />\n  //           <Redirect from=\"/\" to=\"/tabs\" exact />\n  //         </IonRouterOutlet>\n  //       </IonSplitPane>\n  //     </IonReactRouter>\n  //   </IonApp>\n  // );\n  return (\n    <IonApp>\n      <IonReactRouter>\n        <IonSplitPane contentId=\"main\">\n          <Menu />\n          <IonRouterOutlet id=\"main\">\n            <Route path=\"/page/applepay\" component={ApplePay} exact={true} />\n            <Route path=\"/page/checkout\" component={Checkout} exact={true} />\n            <Route path=\"/tabs\" component={MainTabs} exact />\n            <Route path=\"/landing\" component={Dashboard} exact />\n            {/* <ProtectedRoute {...defaultProtectedRouteProps}  path=\"/shop_selections\" component={ShopSelection} exact /> */}\n            <Route path=\"/login\" component={Login} exact />\n            <Route path=\"/stripe\" component={StripeComponent} exact />\n            <Route path=\"/orders/:invoice_id\" component={OrderComplete} exact />\n            <Route path=\"/shop/:name/categories\" component={ShopMain} exact />\n            <Route\n              animated={false}\n              path=\"/tabs/dashboard\"\n              render={() => <Dashboard />}\n              exact={true}\n            />\n            <Route\n              path=\"/tabs/market/:market_id/:tab(item_list)/:category_id\"\n              render={() => <MarketItems cname=\"\" />}\n            />\n            <Route\n              path=\"/tabs/:tab(shop_selections)/:postcode\"\n              render={() => <ShopSelection />}\n              exact={true}\n            />\n            <Route\n              path=\"/tabs/:tab(market)/:market_id\"\n              render={() => <Market />}\n              exact={true}\n            />\n            <Route path=\"/page/:name\" component={Page} exact />\n            <Redirect from=\"/\" to=\"/tabs/dashboard\" exact />\n            \n          </IonRouterOutlet>\n        </IonSplitPane>\n      </IonReactRouter>\n    </IonApp>\n  );\n}\n// };\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      process.env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import 'firebase/auth'\nimport 'firebase/firestore' // <- needed if using firestore\nimport { createStore, combineReducers } from 'redux'\nimport { firebaseReducer } from 'react-redux-firebase'\nimport { createFirestoreInstance, firestoreReducer } from 'redux-firestore' // <- needed if using firestore\nimport firebase from 'firebase';\nimport { RootState } from '../model/DomainModels';\nimport { cartReducer, shopReducer } from '../reducers/Cart';\nimport addressReducer from '../reducers/Address';\n\nconst firebaseConfig = {\n  apiKey: \"AIzaSyCQyvVWaa4R-FxZ05zGSktssnKtwGtRLa8\",\n  authDomain: \"slashiee.firebaseapp.com\",\n  databaseURL: \"https://slashiee.firebaseio.com\",\n  projectId: \"slashiee\",\n  storageBucket: \"slashiee.appspot.com\",\n  messagingSenderId: \"326027994327\",\n  appId: \"1:326027994327:web:5a227f71ef8b92ca523c92\",\n  measurementId: \"G-9DBHG304Z8\",\n  enableRedirectHandling: false\n}\n\n// 255334572519\n\n// react-redux-firebase config\nconst rrfConfig = {\n  userProfile: 'users',\n  presence: 'presence',\n  sessions: 'sessions',\n  markets: 'Markets'\n  // useFirestoreForProfile: true // Firestore for Profile instead of Realtime DB\n}\n\n// Initialize firebase instance\nfirebase.initializeApp(firebaseConfig)\n\n// Initialize other services on firebase instance\nfirebase.firestore() // <- needed if using firestore\n\n// Add firebase to reducers\nconst rootReducer = combineReducers<RootState>({\n  firebase: firebaseReducer,\n  firestore: firestoreReducer as any,\n  cart: cartReducer,\n  shop: shopReducer,\n  address: addressReducer\n})\n\nconst localReducer = combineReducers({\n  firebase: firebaseReducer,\n  cart: cartReducer,\n  shop: shopReducer,\n  address: addressReducer\n})\n\n// Create store with reducers and initial state\nconst initialState = {}\nexport const firebaseStore = createStore(rootReducer, initialState)\n\nexport type CartState = ReturnType<typeof localReducer>;\n\nconst rrfProps = {\n  firebase,\n  config: rrfConfig,\n  dispatch: firebaseStore.dispatch,\n  createFirestoreInstance // <- needed if using firestore\n}\n\nexport default rrfProps;","import React, { } from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\nimport * as serviceWorker from \"./serviceWorker\";\nimport { Provider } from \"react-redux\";\nimport { ReactReduxFirebaseProvider } from \"react-redux-firebase\";\nimport rrfProps, { firebaseStore } from \"./services/FirebaseIniti\";\nimport {Elements} from '@stripe/react-stripe-js';\nimport {loadStripe} from '@stripe/stripe-js';\n\n// type Props ={\n//   children: ReactNode\n// }\n\n// const AuthIsLoaded : Component<Props> = ({children = {}}) => {\n\n//       const auth = useSelector<RootState>(\n//         state => state.firebase.auth\n//       ) as FirestoreReducer.Reducer;\n//       if (!isLoaded(auth)) return <div>splash screen...</div>;\n//       return {children};\n// }\n\n\n// // A wrapper for <Route> that redirects to the login\n// // screen if you're not yet authenticated or if auth is not\n// // yet loaded\n// export const PrivateRoute: React.FC = ({ children, ...rest })  =>{\n//   const auth = useSelector<RootState>(state => state.firebase.auth)\n//   return (\n//     <Route\n//       {...rest}\n//       render={({ location }) =>\n//         isLoaded(auth) && !isEmpty(auth) ? (\n//           children\n//         ) : (\n//           <Redirect\n//             to={{\n//               pathname: \"/login\",\n//               state: { from: location }\n//             }}\n//           />\n//         )\n//       }\n//     />\n//   );\n// }\n\n// Make sure to call `loadStripe` outside of a component’s render to avoid\n// recreating the `Stripe` object on every render.\nconst stripeKey = \"pk_test_YC0gcyGppNgDEzsD5FxBzPXJ00nUQJqCvw\";\n \nconst stripePromise = loadStripe(stripeKey);\n\nReactDOM.render(\n  <Elements stripe={stripePromise} >\n    <Provider store={firebaseStore}>\n      <ReactReduxFirebaseProvider {...rrfProps}>\n        <App />\n      </ReactReduxFirebaseProvider>\n    </Provider>\n  </Elements>,\n\n  document.getElementById(\"root\")\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}